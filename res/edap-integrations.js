!function(e,t){"use strict";function n(){return t(e,o)}var r,o=e.edapOptions||{},i=window&&window.document&&window.document.location&&window.document.location.protocol&&"string"==typeof window.document.location.protocol?window.document.location.protocol.replace(":",""):"",a="function"==typeof define&&define.amd&&o.noAMD!==!0,s=function(){function e(e,t){var n=window.document,r=n.getElementsByTagName("script")[0],o=n.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,t&&(o.id=t),r.parentNode.insertBefore(o,r)}function t(){var e,t,n,r,o=window.document.cookie,i=o.match(/edapOverwrite=([^;]+)(;|$)/),a=null===i?null:i[1],s=new RegExp("=(.+)"),u={};try{if(null!==a)for(e=a.split("|"),n=0,r=e.length;r>n;n++)t=e[n].split(s),u[t[0]]=t[1]}catch(c){u={},console.error(c)}return u}function n(){return window.console?window.console:null}function r(e){var t=this.getConsole(),n="function";null!==t&&(typeof t.warn===n?t.warn(e):typeof t.log===n&&t.log(e))}return{loadScript:e,getOverwriteData:t,getConsole:n,safeConsoleLog:r}}();if(r=s.getOverwriteData(),o.ns=o.ns||"edap",e.edapOptions=o,e[o.ns]&&"function"==typeof e[o.ns].trigger)e.console.warn("EDAP Init: window.edap already defined - you may be loading multiple instances of EDAP");else{if(!(!r[i]||e[o.ns]&&e[o.ns].overwrite))return e[o.ns]=e[o.ns]||[],e[o.ns].overwrite=!0,s.safeConsoleLog("Overwriting edap-integrations with version: "+r[i]),void(a?(require.undef("edap-integrations"),require.config({paths:{"edap-integrations":r[i].replace(/[.]js$/,"")}}),require(["res/edap-integrations"])):s.loadScript(r[i],"edap-integrations-overwrite"));e[o.ns]=n()}a&&define("edap-integrations",[],function(){return e[o.ns]})}(window,function(e){var t,n,r;return function(e){function o(e, t){return E.call(e,t)}function i(e, t){var n,r,o,i,a,s,u,c,l,p,d,g,f=t&&t.split("/"),h=w.map,m=h&&h["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,w.nodeIdCompat&&S.test(e[a])&&(e[a]=e[a].replace(S,"")),"."===e[0].charAt(0)&&f&&(g=f.slice(0,f.length-1),e=g.concat(e)),l=0; l<e.length; l++)if(d=e[l],"."===d)e.splice(l,1),l-=1;else if(".."===d){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((f||m)&&h){for(n=e.split("/"),l=n.length; l>0; l-=1){if(r=n.slice(0,l).join("/"),f)for(p=f.length; p>0; p-=1)if(o=h[f.slice(0,p).join("/")],o&&(o=o[r])){i=o,s=l;break}if(i)break;!u&&m&&m[r]&&(u=m[r],c=l)}!i&&u&&(i=u,s=c),i&&(n.splice(0,s,i),e=n.join("/"))}return e}function a(t, n){return function(){var r=k.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(e,r.concat([t,n]))}}function s(e){return function(t){return i(t,e)}}function u(e){return function(t){v[e]=t}}function c(t){if(o(y,t)){var n=y[t];delete y[t],b[t]=!0,g.apply(e,n)}if(!o(v,t)&&!o(b,t))throw new Error("No "+t);return v[t]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function p(e){return e?l(e):[]}function d(e){return function(){return w&&w.config&&w.config[e]||{}}}var g,f,h,m,v={},y={},w={},b={},E=Object.prototype.hasOwnProperty,k=[].slice,S=/\.js$/;h=function(e, t){var n,r=l(e),o=r[0],a=t[1];return e=r[1],o&&(o=i(o,a),n=c(o)),o?e=n&&n.normalize?n.normalize(e,s(a)):i(e,a):(e=i(e,a),r=l(e),o=r[0],e=r[1],o&&(n=c(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},m={require:function(e){return a(e)},exports:function(e){var t=v[e];return"undefined"!=typeof t?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:d(e)}}},g=function(t, n, r, i){var s,l,d,g,f,w,E,k=[],S=typeof r;if(i=i||t,w=p(i),"undefined"===S||"function"===S){for(n=!n.length&&r.length?["require","exports","module"]:n,f=0; f<n.length; f+=1)if(g=h(n[f],w),l=g.f,"require"===l)k[f]=m.require(t);else if("exports"===l)k[f]=m.exports(t),E=!0;else if("module"===l)s=k[f]=m.module(t);else if(o(v,l)||o(y,l)||o(b,l))k[f]=c(l);else{if(!g.p)throw new Error(t+" missing "+l);g.p.load(g.n,a(i,!0),u(l),{}),k[f]=v[l]}d=r?r.apply(v[t],k):void 0,t&&(s&&s.exports!==e&&s.exports!==v[t]?v[t]=s.exports:d===e&&E||(v[t]=d))}else t&&(v[t]=r)},t=n=f=function(t, n, r, o, i){if("string"==typeof t)return m[t]?m[t](n):c(h(t,p(n)).f);if(!t.splice){if(w=t,w.deps&&f(w.deps,w.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=o,o=i),o?g(e,t,n,r):setTimeout(function(){g(e,t,n,r)},4),f},f.config=function(e){return f(e)},t._defined=v,r=function(e, t, n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),o(v,e)||o(y,e)||(y[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("almond",function(){}),r("circularlog",[],function(){"use strict";function e(e){function t(e){if("number"!=typeof e)throw new Error("CircularLog requires a number for maxEntries");if(0>e)throw new Error("CircularLog requires the number of maxEntries to be >=0")}function n(){var e,t=o.entries;if(t.length>r)for(e=t.length; e>r; e--)t.shift()}var r,o=this;o.entries=[],o.getEntries=function(){return o.entries},o.push=function(e){var t=o.entries;t.push(e),n()},o.setMaxEntries=function(e){t(e),r=e,n()},o.setMaxEntries(e)}return e}),r("edaphelpers",[],function(){"use strict";function e(){var e=this,t={ns:"edap",dataLayerName:"analyticsdatalayer"};e.getWindow=function(){return window},e.getGlobalOptions=function(){return window.edapOptions=window.edapOptions||{},window.edapOptions=e.defaults(window.edapOptions,[t]),window.edapOptions},e.getEdapGlobal=function(){var t,n=e.getWindow(),r=e.getGlobalOptions().ns;if("function"==typeof r)return r();if("string"==typeof r)return e.has(n,r)||(n[r]=[]),n[r];throw t=new TypeError("edapOptions.ns was neither function nor string")},e.defaults=function(e, t){var n,r;for(r=0; r<t.length; r++)for(n in t[r])t[r].hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[r][n]);return e},e.forOwn=function(e, t){Object.keys(e).forEach(function(n){t(e[n],n,e)})},e.isObject=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)},e.clone=function(t){var n,r=[Number,String,Boolean],o=null;if(!t)return t;if(r.forEach(function(e){t instanceof e&&(o=e(t))}),null!==o)return o;if(Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t))o=[],t.forEach(function(t, n){o[n]=e.clone(t)});else if("object"==typeof t){o={};for(n in t)t.hasOwnProperty(n)&&(o[n]=e.clone(t[n]))}else o=t;return o},e.has=function(e, t){return null!==e&&Object.hasOwnProperty.call(e,t)}}return new e}),r("consolehelpers",["edaphelpers"],function(e){"use strict";function t(){var t,r,o=this;for(o.validLogLevels={},o.logLevel="log",o.enabled=!0,o.enable=function(){o.enabled=!0},o.disable=function(){o.enabled=!1},o.setLogLevel=function(e){return o.validLogLevels[e]?(o.logLevel=e,!0):!1},o.getLogLevel=function(){return o.logLevel},o.getConsole=function(){var t=e.getWindow();return null===t.console||"object"!=typeof t.console&&"function"!=typeof t.console?null:t.console},o.shouldLog=function(){var e;return o.enabled===!1?!1:(e=o.getConsole(),null===e?!1:!0)},o.log=function(){var e,t;if(o.shouldLog()){e=o.getConsole(),t=o.getLogLevel();try{e[t].apply(e,arguments)}catch(n){"log"!==t&&"function"==typeof e.log&&e.log.apply(e,arguments)}}},o.startLog=function(e){var t;o.shouldLog()&&(t=o.getConsole(),"function"==typeof t.groupCollapsed?t.groupCollapsed(e):"function"==typeof t.group?t.group(e):o.log(e))},o.endLog=function(){var e;o.shouldLog()&&(e=o.getConsole(),arguments.length>0&&o.log.apply(o,arguments),"function"==typeof e.groupEnd&&e.groupEnd())},t=0,r=n.length; r>t; t++)o.validLogLevels[n[t]]=!0}var n=["log","info","warn","error"];return t}),r("cookieparser",["edaphelpers"],function(e){"use strict";function t(){var t=this;t.getDocument=function(){return window.document},t.getCookies=function(){return t.getDocument().cookie||""},t.getConfigData=function(){var n,r,o,i,a,s,u,c,l={};try{if(n=t.getCookies(),r=n.match(/edapConfig=([^;]+)(;|$)/),o=null===r?null:r[1],i=new RegExp("=(.+)"),null!==o)for(a=o.split("|"),u=0,c=a.length; c>u; u++)s=a[u].split(i),l[s[0]]=s[1]}catch(p){l={},e.getEdapGlobal().push(function(e){e.error(p)})}return l}}return new t}),r("doneable",[],function(){"use strict";function e(e, t){function n(e){"function"==typeof t.error&&t.error(e)}function r(){var e;for(e=0; e<a.length; e++)try{a[e].call(i)}catch(t){n(t)}a=[]}function o(){r(),s="done"}var i=this,a=[],s="pending";t=t||{},i.then=function(e){return"function"==typeof e&&a.push(e),"done"===s&&o(),i};try{e(o)}catch(u){n(u),o()}return i}return e.all=function(t, n){return new e(function(n){function r(){s+=1,s===o&&n()}var o,i,a,s=0;for(t&&t.length?o=t.length:(o=0,n()),i=0; i<t.length; i++)a=t[i],a instanceof e?a.then(r):r()},n)},e}),r("featureflag",["edaphelpers"],function(e){"use strict";function t(n, r){var o,i=this;if(!n||!n.hasOwnProperty("edapVersion"))throw new TypeError("FeatureFlag: must pass in EDAP when creating a new instance");if(!(i instanceof t))throw o=new TypeError('FeatureFlag must be called with the "new" keyword'),n.error(o),o;return i.setAll=function(e){var t,r,o,a;if("object"!=typeof e)throw a=new TypeError("featureFlag.set called without valid obj"),n.error(a),a;for(t=Object.keys(i.internal),r=0,o=t.length; o>r; r++)e.hasOwnProperty(t[r])&&i.set(t[r],e[t[r]])},i.set=function(e, t){i.internal.hasOwnProperty(e)&&(i.internal[e]=t)},i.get=function(t){return"string"!=typeof t?e.clone(i.internal,!0):i.internal.hasOwnProperty(t)?e.clone(i.internal[t]):null},i.internal={name:null,value:null,payload:{}},r&&i.setAll(r),i}return t}),r("features",["featureflag"],function(e){"use strict";function t(n){var r,o,i=this;if(!n||!n.hasOwnProperty("edapVersion"))throw new TypeError("Features: must pass in EDAP when creating a new instance");if(!(i instanceof t))throw o=new TypeError('Features must be called with the "new" keyword'),n.error(o),o;return i.internal={},r=i.internal,i.onLoad=function(e){var t;if("function"!=typeof e)throw t=new TypeError("onLoad(): must be passed a function"),n.error(t),t;if(r.hasLoaded)try{e()}catch(o){n.error(o)}else r.loadCallbacks.push(e)},i.load=function(e){var t,a,s,u="load";if(!(e instanceof Array))throw o=new TypeError(u+"(): featureFlags must be an Array of FeatureFlag instances"),n.error(s),s;if(r.hasLoaded===!0)throw s=new TypeError(u+"(): Features has already been loaded, try calling reset() first"),n.error(s),s;for(r.featureList={},t=0,a=e.length; a>t; t++)i.addFeatureFlag(e[t]);for(r.hasLoaded=!0,t=0,a=r.loadCallbacks.length; a>t; t++)try{r.loadCallbacks[t](n)}catch(c){n.error(c)}r.loadCallbacks=[]},i.addFeatureFlag=function(t){var o;if(!(t instanceof e))throw o=new TypeError("addFeatureFlag(): attempting to load a non-FeatureFlag model"),n.error(o),o;r.featureList[t.get("name")]=t},i.getFeature=function(e){return r.featureList.hasOwnProperty(e)?r.featureList[e]:null},i.getFeatureProperty=function(e, t){var n=i.getFeature(e);return null!==n?n.get(t):null},i.reset=function(){r.featureList={},r.loadCallbacks=[],r.hasLoaded=!1},i.reset(),i}return t}),r("lifecycle",["edaphelpers"],function(e){"use strict";function t(t){function n(e){return r.indexOf(e)>-1}var r,o=this,i=0,a={},s={};if(o.getCallbacks=function(){return a},o.reset=function(){a={},e.forOwn(r,function(e){a[e]=[]})},o.execute=function(t, r){var o="execute";if(!n(t))throw new TypeError(o+": "+t+"is not a valid Lifecycle name");if("undefined"==typeof r&&(r=[]),!Array.isArray(r))throw new TypeError(o+": data must be an Array");return 0===a[t].length?r:(e.forOwn(a[t],function(e){var t=e[1],n=t.apply(null,r);void 0!==n&&(r=n)}),r)},o.register=function(e, t){var r="register";if(!n(e))throw new TypeError(r+": "+e+"is not a valid Lifecycle name");if("function"!=typeof t)throw new TypeError(r+": fn must be a Function");return i++,a[e].push([i,t]),s[i]=e,i},o.unregister=function(e){var t,n,r,o,i,u="unregister";if(!e)throw new TypeError(u+": id must be passed in");if(t=s[e],void 0!==t){for(r=a[t],o=0,i=r.length; i>o; o++)if(n=r[o][0],n===e){r.splice(o,1);break}delete s[e]}},!Array.isArray(t))throw new TypeError("Lifecycle requires an Array of supported lifecycles");r=e.clone(t),o.reset()}return t}),r("playback",["doneable","circularlog","edaphelpers"],function(e, t, n){"use strict";function r(r){var o=this,i=0,a=200,s=!1,u={id:null,eventName:null,data:null,executedListeners:[]};return o.marks={},o.eventLog=new t(a),o.getNextEventID=function(){return i++},o.createEventInstance=function(){var e=n.clone(u);return e.id=o.getNextEventID(),e},o.getIndexOfMark=function(e){var t,n,i,a,s,u,c="getIndexOfMark",l=o.eventLog.getEntries(),p=o.marks[e];if("number"!=typeof p)throw i=new Error(c+"(): invalid mark name "+e),r.error(i),i;if(!l[p]||l[p].id!==p){if(l[0].id>p)return n=l[0].id-p,t=0,[t,n];for(a=0,s=l.length; s>a; a++)if(l[a].id===p)return t=a,[t,0];throw i=new Error(c+"(): could not find eventID="+p),r.error(i),i}return t=p,u=[t,0]},o.setMaxLogEvents=function(e){var t,n="setMaxLogEvents";if("number"!=typeof e||0>e)throw t=new TypeError(n+"(): must be passed a positive integer or 0"),r.error(t),t;o.eventLog.setMaxEntries(e)},o.reset=function(){o.eventLog=new t(a),o.marks={},i=0},o.addEvent=function(e, t){var n;return s?null:(n=o.createEventInstance(),n.eventName=e,n.data=t,o.eventLog.push(n),n)},o.setMark=function(e){var t,n="setMark";if("string"!=typeof e)throw t=new TypeError(n+"(): markName must be a string"),r.error(t),t;if(o.marks.hasOwnProperty(e))throw t=new TypeError(n+"(): "+e+" already used"),r.error(t),t;o.marks[e]=i},o.removeMark=function(e){var t;if("string"!=typeof e)throw t=new TypeError("removeMark(): markName must be a string"),r.error(t),t;return o.marks.hasOwnProperty(e)?(delete o.marks[e],!0):!1},o.replay=function(t, i){var a,s,u,c,l,p,d,g,f,h="replay",m=[];if(t=t||"init",i=i||{},!o.marks.hasOwnProperty(t))throw f=new TypeError(h+"(): cannot find markName="+t),r.error(f),f;for(s=o.eventLog.getEntries(),c=o.getIndexOfMark(t),l=c[0],p=c[1],p>0&&r.error(h+"(): missed "+c[1]+" events in replay"),u=n.clone(s),d=l,g=u.length; g>d; d++)a=r.trigger(u[d].eventName,u[d].data,n.defaults({},[i,{forceData:!0,playbackObj:u[d]}])),m.push(a);return e.all(m)},o.enable=function(){s=!1},o.disable=function(){s=!0},o.isDisabled=function(){return s},o}return r}),r("edap",["circularlog","consolehelpers","cookieparser","doneable","edaphelpers","featureflag","features","lifecycle","playback"],function(e, t, n, r, o, i, a, s, u){"use strict";function c(){var c,l,p,d,g,f,h,m,v,y={},w="delayProcessing",b=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-4[a-z0-9]{3}-[a-z0-9]{4}-[a-z0-9]{12}$"),E="edap.error",k="edap.load.cookie",S="edap.flush",U=200,D="edap.reset",C="edap:",A=[E,S,D],x="onEventTrigger",O="onEventDataExtraction",L="onEventComplete",P="onListenerAdded",I="onListenerRemoved",N=[x,O,L,P,I];return h=this,h.internal={},h["public"]={},v=h.internal,m=h["public"],h.edapVersion="5.0.0",v.reset=function(){h.logs={error:[]},v.inError=!1,v.listeners={},v.events={},v.history=new e(U),v.scopes={},v.savedCmds=null,v.config={maxWaitTime:2},c={},v.initializeUuidGeneration(),m.lifecycle.reset()},v.validateCondition=function(e, t){var n;if(!e)throw n=new TypeError(t),h.error(n),n},v.arrayToObject=function(e){var t,n,r={};for(v.validateCondition(e instanceof Array,"arrayToObject(): arr not passed an Array"),t=0,n=e.length; n>t; t++)r[e[t]]=!0;return r},v.logHistory=function(e){v.history.push([e])},v.flushAsyncCommands=function(e){for(var t; e.length>0;){t=e.shift();try{h.push.call(h,t)}catch(n){}}},y.get=function(e, t){var n=null,r=["localStorage","sessionStorage"],o="localStorage";t&&t.storages&&-1!==r.indexOf(t.storages)&&(o=t.storages),e=C+e;try{n=window[o].getItem(e)}catch(i){h.error(i)}return"string"==typeof n?JSON.parse(n):n},y.set=function(e, t, n){var r="localStorage";n&&n.storages&&(r=n.storages),e=C+e,"string"!=typeof t&&(t=JSON.stringify(t));try{return window[r].setItem(e,t),!0}catch(o){h.error(o)}return!1},v.getPersistentLogger=function(){return y},v.removeCmd=function(e, t){var n,r,o,i,a=!1;try{if(n=y.get(w),r=JSON.stringify(t),null===n)return!0;if(n&&n.hasOwnProperty("ver")){for(o=0,i=n.cmds.length; i>o; o++)e===n.cmds[o][0]&&r===JSON.stringify(n.cmds[o][1])&&(n.cmds.splice(o,1),o=i);y.set(w,n),a=!0}else h.error(new TypeError("removeCmd found incorrectly formatted cmd data: "+JSON.stringify(n)))}catch(s){h.error(s)}return a},v.processStoredCmds=function(){return new r(function(e){function t(){s++,s===i&&e()}function n(e){var n=r.cmds[e][0],o=r.cmds[e][1];h.trigger(n,o).then(function(){v.removeCmd(n,o),t()})}var r,o,i,a,s=0;try{r=y.get(w)}catch(u){return h.error(u),void e()}if(null===r)return void e();if(!r||!r.hasOwnProperty("ver"))return o=new TypeError("processStoredCmds(): stored values not in the correct format: "+JSON.stringify(r)),h.error(o),void e();for(i=r.cmds.length,a=0; i>a; a++)n(a)},{error:h.error})},v.getCallbacks=function(e){var t,n,r,o,i="getCallbacks",a=[];for(v.validateCondition("string"==typeof e,i+"(): eventName must be a string"),t=e.split("."),o=t.length; o>0; o--)n=t.slice(0,o),r=n.join("."),e===r&&v.events.hasOwnProperty(r)&&(a=a.concat(v.events[r])),n[o-1]="*",r=n.join("."),v.events.hasOwnProperty(r)&&(a=a.concat(v.events[r]));return a},v.setupFromCookie=function(){var e=v.asInteger;g=n.getConfigData(),"on"===g.logging?m.console.enable():"off"===g.logging?m.console.disable():(f=h.getEnv(),m.console.disable(),("test"===f||"stage"===f||"dev"===f)&&m.console.enable()),g.hasOwnProperty("logLevel")&&m.console.setLogLevel(g.logLevel),g.hasOwnProperty("logReplays")&&(v.shouldLogReplayedEvents="on"===g.logReplays?!0:!1),g.hasOwnProperty("historySize")&&v.history.setMaxEntries(e(g.historySize)),g.hasOwnProperty("playbackSize")&&m.playback.setMaxLogEvents(e(g.playbackSize))},v.getUniqUuid=function(){var e,t=10,n=m.createUuid();for(e=0; t>e; e++){if(!v.listeners.hasOwnProperty(n))return n;n=m.createUuid()}return h.error(new Error("could not generate a unique UUID")),null},v.executeListener=function(e, t){var n="executeListener";return new r(function(r){function o(){s=!0}var i,a,s=!1;try{i=v.listeners[e],i.func.call(h,t,o,r),i.executedCount++,s||r()}catch(u){a=new Error(n+"(): error caught in processing listener: "+e+" stacktrace:"+u.stack),h.error(a,t),r()}},{error:h.error})},v.buildTriggerData=function(e, t, n){var r;return v.validateCondition("string"==typeof e,"buildTriggerData(): called without an eventName"),t=t||{},n=n||{},n.forceData?m.clone(t):(r=m.extend(h.getDL(),t),r.edapeventname=e,m.lifecycle.execute("onEventDataExtraction",[e,r,n])[1])},v.createListener=function(e){var t=v.getUniqUuid();return null!==t&&(v.listeners[t]={func:e,executedCount:0}),t},v.removeListener=function(e){null!==m.getListener(e)&&delete v.listeners[e]},v.removeListenerFromEvents=function(e){var t,n,r,o,i,a,s,u="removeListenerFromEvents";for(i=m.getEventNames(),v.removeListener(e),t=0,r=i.length; r>t; t++)for(a=i[t],s=m.getEvent(a),n=0,o=s.length; o>n; n++)if(s[n]===e)return s.splice(n,1),v.logHistory([u+"():","removed uuid",e,"from",a,"queue"].join(" ")),void m.lifecycle.execute(I,[a,e])},v.addListenerToEvent=function(e, t){var n=v.events,r=m.getEvent(e);r instanceof Array?r.push(t):n[e]=[t]},v.defaultToObj=function(e){return void 0===e||null===e?{}:e},v.initializeUuidGeneration=function(){var e,t=v.hexLookupTable,n=t.length,r=m.getWindow();for(e=0; n>e; e++)t[e]=(16>e?"0":"")+e.toString(16);l=r.Date&&"function"==typeof r.Date.now?function(){return r.Date.now()}:function(){return(new r.Date).getTime()},p=r.performance&&"function"==typeof r.performance.now,d=p?r.performance:null},v.hexLookupTable=new Array(256),v.asInteger=function(e){var t=parseInt(e,10);if(isNaN(t))throw new TypeError(e+" cannot be parseInt()'d into a number");return t},m.coreSupportedEvents=A,m.isCoreEdapEvent=function(e){return m.coreSupportedEvents.indexOf(e)>-1},m.addIgnoredConsoleEvent=function(e){c[e]=!0},m.removeIgnoredConsoleEvent=function(e){delete c[e]},m.isIgnoredConsoleEvent=function(e){return c[e]===!0},m.clone=function(e){return o.clone(e)},m.defaults=function(e, t){return o.defaults(e,t)},m.forOwn=function(e, t){return o.forOwn(e,t)},m.extend=function(){var e,t,n=Array.prototype.slice.call(arguments);for(n.unshift({}),e=0; e<n.length; e++)for(t in n[e])n[e].hasOwnProperty(t)&&(n[0][t]=n[e][t]);return m.clone(n[0])},m.createUuid=function(){var e,t,n,r,o=l(),i=v.hexLookupTable;return p&&(o+=d.now()),e=o*Math.random()|0,t=o*Math.random()|0,n=o*Math.random()|0,r=o*Math.random()|0,i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>16&15|64]+i[t>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]},m.getGlobal=function(){return o.getEdapGlobal()},m.getGlobalOptions=function(){return o.getGlobalOptions()},m.console=new t,m.ConsoleHelpers=t,m.getListener=function(e){return v.listeners.hasOwnProperty(e)?v.listeners[e]:null},m.getEvent=function(e){return v.events.hasOwnProperty(e)?v.events[e]:null},m.getEventNames=function(){return Object.keys(v.events)},m.getListenersForEvent=function(e){var t,n,r,o=[];if(t=m.getEvent(e),null===t)return null;for(n=0,r=t.length; r>n; n++)o.push(m.getListener(t[n]));return o},m.getWindow=function(){return o.getWindow()},m.playback=new u(h),m.FeatureFlag=i,m.features=new a(h),m.lifecycle=new s(N),h.on=function(e, t, n){var r,o,i;return n=n||{},o=n.logName||"on",v.logHistory(["Called",o+"()","for event",e,"with",JSON.stringify(n)].join(" ")),v.validateCondition("string"==typeof e,o+"(): eventName must be a string"),v.validateCondition(!e.match(b),o+"(): eventName cannot be a uuid"),v.validateCondition("function"==typeof t,o+"(): cb must be a function"),r=v.createListener(t),null===r?(i=new TypeError(o+"(): cannot create UUID"),h.error(i),null):(v.addListenerToEvent(e,r),v.logHistory([o+"():","Added event listener for",e].join(" ")),m.lifecycle.execute(P,[e,r]),r)},h.off=function(e){var t,n,r,o="off";if("string"==typeof e){if(e.match(b))v.logHistory(["Called",o+"()","with uuid",e].join(" ")),v.removeListenerFromEvents(e);else if(v.logHistory(["Called",o+"()","with string",e].join(" ")),t=m.getEvent(e),null!==t){for(v.events[e]=[],n=0,r=t.length; r>n; n++)v.removeListener(t[n]),m.lifecycle.execute(I,[e,t[n]]);v.logHistory([o+"():","cleared all cbs for",e,"event"].join(" "))}}else v.logHistory(["Called",o+"()","invalid"].join(" ")),v.validateCondition(!1,o+"(): must be passed an event name string or a function")},h.once=function(e, t, n){function r(){h.off(o),t.apply(h,arguments)}var o;return n=n||{},n.logName="once",o=h.on(e,r,n)},h.trigger=function(e, t, n){var i,a,s="trigger",u=v.config.maxWaitTime,c=["maxWaitTime","forceData","playbackObj"],l=t,p=n,d=!0;if(o.isObject(n)?o.forOwn(n,function(e, t){-1===c.indexOf(t)&&(a=new TypeError(s+"(): called with invalid option: "+t))}):(null!==n&&void 0!==n&&(a=new TypeError(s+"(): opts must be an Object if defined")),n={}),t=v.defaultToObj(t),v.logHistory(["Called",s+"()","for event",e,"with data",JSON.stringify(l),"with opts",JSON.stringify(p)].join(" ")),a)throw h.error(a),a;return v.validateCondition("string"==typeof e,s+"(): eventName must be a string"),v.validateCondition("object"==typeof t||null===t||"undefined"==typeof t,s+"(): data must be an Object if defined"),v.validateCondition(!e.match(/[*]$/),s+"(): cannot trigger wildcard event explicitly "+e),m.lifecycle.execute("onEventTrigger",[e,t,n]),i=!!n.playbackObj,(m.isIgnoredConsoleEvent(e)||i&&!v.shouldLogReplayedEvents)&&(d=!1),new r(function(r){function o(){clearTimeout(g),w.length&&v.logHistory(["Executed",w.length,"listeners total for event",e].join(" ")),m.lifecycle.execute("onEventComplete",[e,h,n]),r()}function a(){b++,b===f&&o()}function c(t){d&&(m.console.startLog((i?"(replay) ":"")+"EDAP event triggered: "+e),m.console.log("Passed Data: ",l),m.console.log("Options: ",p),t())}var g,f,h,y,w=v.getCallbacks(e),b=0,E={},k=null,S=!0;if(n.playbackObj&&(k=n.playbackObj,E=v.arrayToObject(k.executedListeners)),S=null===k,"number"==typeof n.maxWaitTime&&(u=n.maxWaitTime),u>0&&(g=setTimeout(function(){v.logHistory([s+"()",u+" sec","timeout reached for event",e].join(" ")),o()},1e3*u)),0===w.length)return S?(h=v.buildTriggerData(e,t,n),k=m.playback.addEvent(e,h),c(function(){m.console.endLog("Shrinkwrapped Data (no callbacks registered) ",h)})):c(function(){m.console.endLog("Shrinkwrapped Data: skipped (no callbacks registered)")}),void o();for(h=v.buildTriggerData(e,t,n),S&&(k=m.playback.addEvent(e,h)),c(function(){m.console.endLog("Shrinkwrapped Data: ",h)}),y=0,f=w.length; f>y; y++)E.hasOwnProperty(w[y])?a():(null!==k&&k.executedListeners.push(w[y]),v.executeListener(w[y],h).then(a))},{error:function(){d&&m.console.endLog("Error Caught"),h.error(a)}})},h.error=function(e, t, n){var r,o,i,a=m.console.getLogLevel(),s=n||{},u="errorlogmessage",c=null;if(e){try{o=e instanceof Error?e:new Error(e),i="string"==typeof o.stack?o.stack:o.toString()}catch(l){o=e.toString(),i=o}m.console.setLogLevel("error"),m.console.log("EDAP error: "+i),m.console.setLogLevel(a),h.logs.error.push(o),v.inError!==!1||s.logErrorOnly||(v.inError=!0,r={},t&&(r=m.clone(t),r.erroredapeventname=r.edapeventname,r.edapeventname=E,c={forceData:!0}),r[u]=i,h.trigger(E,r,c).then(function(){v.inError=!1}))}},h.push=function(e){var t,n="push";if(v.logHistory(["Called",n+"()"].join(" ")),v.validateCondition(1===arguments.length,n+"(): function takes one argument"),v.validateCondition("function"==typeof e||"object"==typeof e,n+"(): arg must be a Function or an Object"),"function"==typeof e)try{e.call(h,h)}catch(r){t=new Error(n+"(): error caught in executing function: "+JSON.stringify(e)+" stacktrace:"+r.stack),h.error(t)}else v.validateCondition("string"==typeof e.name,n+'(): passed object must have a "name" property with a string value'),h.trigger(e.name,e.data,e.options)},h.getScopeInfo=function(e){var t="getScopeList";return v.logHistory(["Called",t+"()"].join(" ")),"string"==typeof e?v.scopes[e]||null:v.scopes},h.getScopeData=function(e){var t;return v.validateCondition("string"==typeof e,"getScopeData(): scopeName was not a string"),t=h.getScopeInfo(e),null!==t?t.data:null},h.Scope=function(e){var t,n=this;return v.validateCondition(n!==h,'Edap.Scope must be called with the "new" keyword'),v.validateCondition("string"==typeof e&&e.length>0,"name must be a non-zero length string"),v.validateCondition(!v.scopes.hasOwnProperty(e)||void 0===v.scopes[e],e+" scope already registered"),v.scopes[e]={instance:n,data:{}},o.forOwn(h,function(e, t){n[t]=h[t]}),n.on=function(e){var t=h.on.apply(h,arguments);return null!==t&&(n.uuids[t]=!0,v.logHistory(["Scope",n.name,"registered new callback for event",e,"uuid",t].join(" "))),t},n.unregister=function(){v.logHistory(["Called unregister() for Scope",n.name].join(" ")),o.forOwn(n.uuids,function(e, t){h.off(t),delete n.uuids[t]})},n.destroy=function(){var e=n.name,r=function(){throw new Error("Attempting to access destroyed edap scope "+e)};v.logHistory(["Called destroy() for Scope",n.name].join(" ")),n.unregister(),m.lifecycle.unregister(t),o.forOwn(n,function(e, t){"function"==typeof n[t]?n[t]=r:delete n[t]}),v.scopes[e]=void 0},n.getData=function(){return h.getScopeData(n.name)},n.name=e,n.uuids={},t=m.lifecycle.register(I,function(e, t){n.uuids[t]&&(delete n.uuids[t],v.logHistory(["Scope",n.name,"removed callback uuid",t].join(" ")))}),n},h.getDL=function(){var e=m.getWindow(),t=m.getGlobalOptions().dataLayerName;return"function"==typeof t?t():"string"==typeof t?(o.has(e,t)||(e[t]={}),e[t]):void h.error(new TypeError("edapOptions.dataLayerName was neither function nor string"))},h.getEnv=function(e){var t;return t=o.isObject(e)?e:h.getDL(),t.appenvironment||"unknown"},m.playback.setMark("init"),h.globalOptions=m.getGlobalOptions(),h.globalOptions.skipPlayback===!0&&m.playback.disable(),v.reset(),h.on(D,function(){v.reset()}),v.setupFromCookie(),h.on(k,function(){v.setupFromCookie()}),h.on(S,function(e, t, n){t(),v.setupFromCookie(),v.savedCmds instanceof Array&&v.flushAsyncCommands(v.savedCmds),v.savedCmds=null,v.processStoredCmds().then(n)}),v.savedCmds=m.getGlobal(),h}return new c}),r("domhelpers",["edap"],function(e){"use strict";var t={getWindow:function(){return window},getScreen:function(){return this.getWindow().screen||{}},getEdapIntegrationsVersion:function(){return e.integrationsVersion||"-1"},getDocument:function(){return document},getDocumentReferrer:function(){return this.getDocument().referrer},isCrossDomainReferral:function(){var e=this.getDocumentReferrer(),t=new RegExp("^"+this.getLocationOrigin()+"/");return!(!e||null!==e.match(t))},getDocumentCookie:function(){return document.cookie},setDocumentCookie:function(e){document.cookie=e},getLocation:function(){return this.getDocument().location},getHref:function(){return window.document.location.href},getLocationProtocol:function(){return window.document.location.protocol},getHostname:function(){return window.document.location.hostname},getPathname:function(){return window.document.location.pathname},getSearch:function(){return window.document.location.search},getPage:function(){return t.getPathname()+t.getSearch()},getLocationOrigin:function(){return t.getLocationProtocol()+"//"+t.getHostname()},getNavigator:function(){return window.navigator},addWindowEventListener:function(e, t){window.addEventListener(e,t)},removeWindowEventListener:function(e, t){window.removeEventListener(e,t)},getMsFromEpoch:function(){return"function"==typeof window.Date.now?Date.now():(new Date).getTime()},loadScript:function(e, t){var n=this.getDocument(),r=n.getElementsByTagName("script")[0],o=n.createElement("script");if("string"==typeof t&&t.length>0){if(null!==n.getElementById(t))return!1;o.id=t}return o.async=!0,o.type="text/javascript",0===e.indexOf("//")?o.src=("https:"===this.getLocation().protocol?"https:":"http:")+e:o.src=e,r.parentNode.insertBefore(o,r),!0},loadScriptMulti:function(e){var n,r,o,i=!0;if(!(e instanceof Array))return i;for(r=0,o=e.length; o>r; r++)n=t.loadScript(e[r]),i=i&&n;return i},getImage:function(e, t){(new Image).src=e,"function"==typeof t&&t(e)},getCookie:function(t){var n,r,o=null;try{return n=this.getDocumentCookie(),r=n.match("(^|[^;]+)\\s*"+t+"\\s*=\\s*([^;]+)"),r?r.pop():o}catch(i){e.error(i)}return o},setCookie:function(t, n, r, o){var i,a="",s=new Date;try{i=60*o*1e3,s.setTime(s.getTime()+i),"number"==typeof o&&(0>=i&&(a="; max-age=0"),a+="; expires="+s.toUTCString()),this.setDocumentCookie(t+"="+n+a+"; path=/; domain="+r+";")}catch(u){e.error(u)}},removeCookie:function(e, t){t||(t=this.getHostname()),this.setCookie(e,"",t,-1440)},getSearchParam:function(t){var n,r,o,i,a=t+"=";try{for(n=this.getSearch().replace("?",""),r=n.split("&"),o=0; o<r.length; o++)if(i=decodeURIComponent(r[o]),0===i.indexOf(a))return i.substring(a.length,i.length)}catch(s){e.error(s)}return null},getScreenWidth:function(){return this.getScreen().width},getScreenHeight:function(){return this.getScreen().height},getViewportWidth:function(){return this.getWindow().innerWidth||this.getDocument().documentElement.clientWidth||this.getDocument().getElementsByTagName("body")[0].clientWidth},getViewportHeight:function(){return this.getWindow().innerHeight||this.getDocument().documentElement.clientHeight||this.getDocument().getElementsByTagName("body")[0].clientHeight},getMQSize:function(){var t,n="-1";try{t=this.getViewportWidth(),"number"==typeof t&&(n=768>t?"xs":992>t?"sm":1200>t?"md":"lg")}catch(r){e.error(r)}finally{return n}},getPreferredLanguage:function(){var e=this.getNavigator(),t="-1";return(e.language||e.userLanguage)&&(t=e.language||e.userLanguage),t}};return t}),r("debughelpers",["domhelpers"],function(e){"use strict";var t={getDebugCookieName:function(){return"edapDebug"},isInDebugMode:function(n){var r=t.getDebugCookieName(),o=e.getCookie(r)||"",i=n+"=true";return-1!==o.indexOf(i)}};return t}),r("adlhelpers",["edap"],function(e){"use strict";function t(t){return this.get=function(e){return void 0===e?this.adl:this.adl[e]},this.isSetGet=function(e){return this.isSet(e)?this.get(e):void 0},this.setIfNotSet=function(e, t){!this.isSet(e)&&this.shouldSet(t)&&this.set(e,""+t)},this.setIfShouldSet=function(e, t){this.shouldSet(t)&&this.set(e,""+t);
},this.getPublicUUID=function(){return this.isSet("publicuuid")?this.get("publicuuid"):this.isSet("guid")?this.get("guid"):"-1"},this.getListingIds=function(){return this.isSet("eventlistingids")?this.get("eventlistingids"):this.isSet("listingids")?this.get("listingids"):this.isSet("listingid")?this.get("listingid"):"-1"},this.set=function(t,n){return"string"!=typeof t||"string"!=typeof n?(e.error("Attempting to set ADL key/value with non-strings: "+t+", "+n),!1):(this.adl[t]=n,!0)},this.shouldSet=function(e){return void 0!==e&&null!==e&&"-1"!==e},this.isSet=function(e){return this.shouldSet(this.adl[e])},this.isTrue=function(e){return!!this.adl[e]&&this.adl[e].toString&&"function"==typeof this.adl[e].toString&&"true"===this.adl[e].toString()},this.isFalse=function(e){return void 0!==this.adl[e]&&this.adl[e].toString&&"function"==typeof this.adl[e].toString&&"false"===this.adl[e].toString()},null!==t&&"object"==typeof t?this.adl=t:this.adl=e.getDL(),this}return t}),r("data-enrichment/pageid-helper",["adlhelpers","domhelpers","edap"],function(e,t,n){"use strict";function r(){function r(){return n.getScopeData(c).parentPageviewIdObj||{}}function o(e){n.getScopeData(c).parentPageviewIdObj=e}var i=new e,a="parentPageviewId",s="sessionStorage",u="localStorage",c="hadoop",l="-1";this.getData=function(e,t){var r=n.internal.getPersistentLogger();return r.get(e,t)},this.getTabSpecificData=function(e){return this.getData(e,{storages:s})},this.getCrossTabData=function(e){return this.getData(e,{storages:u})},this.getDataWithFallback=function(e){var t=this.getData(e,{storages:s});return t||(t=this.getData(e,{storages:u})),t},this.setData=function(e,t,r){var o=n.internal.getPersistentLogger();return o.set(e,t,r)},this.setTabSpecificData=function(e,t){this.setData(e,t,{storages:s})},this.setCrossTabData=function(e,t){this.setData(e,t,{storages:u})},this.getSessionId=function(e){var n;return e.isSet("sessionid")?e.get("sessionid"):(n=t.getCookie("has"),e.shouldSet(n)?n:l)},this.sessionIdsMatch=function(e,t){return i.shouldSet(e)&&i.shouldSet(t)&&e===t},this.storeCurrentPageviewId=function(e){var t,r=this,o=n["public"].createUuid();r.cacheParentPageviewId(o,e),t={parentpageviewid:o,sessionid:r.getSessionId(e)},r.setTabSpecificData(a,t),r.setCrossTabData(a,t),r.trackCurrentWindowIds()},this.cacheParentPageviewId=function(e,t){var n=this,r=n.getDataWithFallback(a)||{},i=n.getSessionId(t);n.sessionIdsMatch(r.sessionid,i)||(r.parentpageviewid=l),r.sessionid=i,r.currentpageviewid=e,o(r)},this.trackCurrentWindowIds=function(){function e(){n=r.getTabSpecificData(a),r.setCrossTabData(a,n)}var n,r=this,o=r.getCrossTabData(a),i="focus";null===o&&e(),t.removeWindowEventListener(i,e),t.addWindowEventListener(i,e)},this.getParentPageviewId=function(e){var t=this,n=t.getSessionId(e),o=r();return t.sessionIdsMatch(o.sessionid,n)||(o.parentpageviewid=l),o.parentpageviewid},this.getCurrentPageviewId=function(){var e=r();return e.currentpageviewid}}return new r}),r("data-enrichment/inauth-helper",["domhelpers"],function(e){"use strict";function t(){var t=null,n="IAID";this.getId=function(){return null!==t?t:t=e.getCookie(n)},this.resetCache=function(){t=null}}return new t}),r("data-enrichment/hooks/global",["adlhelpers","domhelpers","data-enrichment/pageid-helper","data-enrichment/inauth-helper"],function(e,t,n,r){"use strict";function o(o){o["public"].lifecycle.register("onEventDataExtraction",function(i,a,s){var u=new e(a),c=u.setIfShouldSet;return"pageview"===i&&n.storeCurrentPageviewId(u),c.apply(u,["pagehref",t.getHref()]),c.apply(u,["edapintegrationsversion",t.getEdapIntegrationsVersion()]),c.apply(u,["clienttimestamp",t.getMsFromEpoch()]),c.apply(u,["edapeventid",o["public"].createUuid()]),c.apply(u,["currentpageviewid",n.getCurrentPageviewId()]),c.apply(u,["parentpageviewid",n.getParentPageviewId(u)]),c.apply(u,["inauthid",r.getId()]),c.apply(u,["screenwidth",t.getScreenWidth()]),c.apply(u,["screenheight",t.getScreenHeight()]),c.apply(u,["viewportwidth",t.getViewportWidth()]),c.apply(u,["viewportheight",t.getViewportHeight()]),c.apply(u,["mqsize",t.getMQSize()]),c.apply(u,["clienttype","web"]),c.apply(u,["referralchange",t.isCrossDomainReferral()]),c.apply(u,["preferredlanguage",t.getPreferredLanguage()]),[i,a,s]})}return{setupHooks:o}}),r("data-enrichment/register-data-enrichment-hooks",["data-enrichment/hooks/global"],function(){"use strict";function e(e){for(t=0;t<n.length;t++)n[t].setupHooks(e)}var t,n=arguments;return{setupHooks:e}}),r("data-enrichment/edap-data-enrichment-integration",["edap","data-enrichment/register-data-enrichment-hooks"],function(e,t){"use strict";function n(){return t.setupHooks(o),e}var r="data-enrichment",o=new e.Scope(r);return{init:n}}),r("ua/ua-config",[],function(){"use strict";return{edapScopeName:"ua",scriptId:"edap-ua",uaNS:window.edapOptions.uaNS||"ua",uaTrackerName:window.edapOptions.ns,uaScriptUrl:"//www.google-analytics.com/analytics.js",uaDebugScriptUrl:"//www.google-analytics.com/analytics_debug.js",uaCookieName:"_ga",uaCrossDomainParam:"_haga",entryInfoCookie:"__utmuaepi",entryInfoCookieFormat:["entrypagename","entrypagetype"],maxDimensionBytes:150,supportedSites:{abritel:["UA-1010473-2","abritel.fr","/",null,null],admin_homeaway_us:["UA-750552-20",null,"/",/^https?:[/][/]admin[^.]*[.]homeaway[.]com(:\d+)?[/]?.*$/,3],asia_homeaway_us:["UA-750552-15",null,"/",/^https?:[/][/]asia[^.]*[.]homeaway[.]com(:\d+)?[/]?.*$/,3],bookabach:["UA-616929-17",null,"/",/^https?:[/][/](www[.])?([^.]*[.])?bookabach[.](local|dev|co[.]nz)(:\d+)?[/]?.*$/,3],bnb:["UA-210916-1","bedandbreakfast.com","/",null,null],bnb_de:["UA-210916-24","de.bedandbreakfast.com","/",null,null],bnb_es:["UA-210916-15","es.bedandbreakfast.com","/",null,null],bnb_fr:["UA-210916-14","fr.bedandbreakfast.com","/",null,null],bnb_it:["UA-210916-16","it.bedandbreakfast.com","/",null,null],expedia_abritel:["UA-1010473-7",null,"/",/^https?:[/][/]expedia[^.]*[.]abritel[.]fr(:\d+)?[/]?.*$/,3],expedia_homeaway_de:["UA-695211-4",null,"/",/^https?:[/][/]expedia[^.]*[.]fewo-direkt[.]de(:\d+)?[/]?.*$/,3],expedia_homeaway_it:["UA-6702181-3",null,"/",/^https?:[/][/]expedia[^.]*[.]homeaway[.]it(:\d+)?[/]?.*$/,3],expedia_homeaway_us:["UA-750552-12",null,"/",/^https?:[/][/]expedia[^.]*[.]homeaway[.]com(:\d+)?[/]?.*$/,3],expediagroup:["UA-143562396-1","expediagroup.com","/",null,null],hasp_escapia:["UA-72367836-1",null,"/",null,null,!0],hasp_v12:["UA-72367836-2",null,"/",null,null,!0],homeaway_ar:["UA-26926207-8","homeaway.com.ar","/",null,null],homeaway_asia:["UA-26926207-8","homeaway.asia","/",null,null],homeaway_at:["UA-25375606-1","homeaway.at","/",null,null],homeaway_au:["UA-20666200-1","homeaway.com.au","/",null,null],homeaway_br:["UA-16267529-1","aluguetemporada.com.br","/",null,null],homeaway_ca:["UA-20662353-1","homeaway.ca","/",null,null],homeaway_cafr:["UA-20659398-1","fr.homeaway.ca","/",null,null],homeaway_cl:["UA-26926207-8","homeaway.cl","/",null,null],homeaway_cn:["UA-26926207-8","homeaway.com.cn","/",null,null],homeaway_co:["UA-26926207-8","homeaway.com.co","/",null,null],homeaway_de:["UA-695211-1","fewo-direkt.de","/",null,null],homeaway_dk:["UA-6698428-1","homeaway.dk","/",null,null],homeaway_ec:["UA-26926207-8","homeaway.ec","/",null,null],homeaway_es:["UA-6515617-1","homeaway.es","/",null,null],homeaway_fi:["UA-8405990-1","homeaway.fi","/",null,null],homeaway_gr:["UA-57529940-1","homeaway.gr","/",null,null],homeaway_hk:["UA-26926207-8","homeaway.hk","/",null,null],homeaway_id:["UA-26926207-8","homeaway.co.id","/",null,null],homeaway_in:["UA-26926207-8","homeaway.co.in","/",null,null],homeaway_it:["UA-6702181-1","homeaway.it","/",null,null],homeaway_jp:["UA-26926207-8","homeaway.jp","/",null,null],homeaway_kr:["UA-26926207-8","homeaway.co.kr","/",null,null],homeaway_lk:["UA-26926207-8","homeaway.lk","/",null,null],homeaway_mx:["UA-20659393-1","homeaway.com.mx","/",null,null],homeaway_my:["UA-26926207-8","homeaway.com.my","/",null,null],homeaway_nl:["UA-6702415-1","homeaway.nl","/",null,null],homeaway_nz:["UA-35336958-1","homeaway.co.nz","/",null,null],homeaway_no:["UA-6737728-1","homeaway.no","/",null,null],homeaway_pe:["UA-26926207-8","homeaway.com.pe","/",null,null],homeaway_ph:["UA-26926207-8","homeaway.com.ph","/",null,null],homeaway_pl:["UA-62763815-1","homeaway.pl","/",null,null],homeaway_pt:["UA-6698180-1","homeaway.pt","/",null,null],homeaway_ru:["UA-26926207-8","homeaway.ru","/",null,null],homeaway_se:["UA-6698412-1","homeaway.se","/",null,null],homeaway_sg:["UA-26926207-8","homeaway.com.sg","/",null,null],homeaway_th:["UA-26926207-8","homeaway.co.th","/",null,null],homeaway_tw:["UA-26926207-8","homeaway.tw","/",null,null],homeaway_uk:["UA-5649527-1","homeaway.co.uk","/",null,null],homeaway_us:["UA-750552-1","homeaway.com","/",null,null],homeaway_uy:["UA-26926207-8","homeaway.com.uy","/",null,null],homeaway_vn:["UA-26926207-8","homeaway.com.vn","/",null,null],homelidays_es:["UA-10200033-4","homelidays.es","/",null,null],homelidays_fr:["UA-394012-1","homelidays.com","/",null,null],homelidays_it:["UA-394012-1","homelidays.it","/",null,null],odhr:["UA-3854735-1","ownersdirect.co.uk","/",null,null],rezovation:["UA-210916-3","rezovation.com","/",null,null],stayz:["UA-6596349-1","stayz.com.au","/",null,null],toprural:["UA-17472105-1","toprural.com","/",null,null],toprural_cat:["UA-17472502-1","toprural.cat","/",null,null],toprural_fr:["UA-17471817-1","toprural.fr","/",null,null],toprural_it:["UA-17471658-1","toprural.it","/",null,null],toprural_pt:["UA-17471555-1","toprural.pt","/",null,null],travelmob:["UA-26926207-8","travelmob.com","/",null,null],vr:["UA-2376682-1","vacationrentals.com","/",null,null],vrbo:["UA-188611-1","vrbo.com","/",null,null],localhost:["DEV","localhost","/",null,null],"0.0.0.0":["DEV","0.0.0.0","/",null,null],"127.0.0.1":["DEV","127.0.0.1","/",null,null],github_pages:["DEV",null,"/",/^(https?:[/][/])?github\.[\w]+\.com\/pages.*$/i,1],homeaway_machine_name:["DEV",null,"/",/^(https?:[/][/])?ha(00)?(\d{4})(\.[\w]+\.internal)?(:\d+)?[/]?.*$/i,1],homeaway_machine_serial_number:["DEV",null,"/",/^(https?:[/][/])?C02.*(\.[\w]+\.internal)?(:\d+)?[/]?.*$/i,1]},pagenameToVPV:{"ha: addto: add-on":"/cart/addto/add-on","ha: addto: confirm":"/cart/addto/confirm","ha: addto: cross sell":"/cart/addto/cross-sell","ha: addto: payment":"/cart/addto/payment","ha: addto: search position":"/cart/addto/search-position","ha: addto: select subscription to upgrade":"/cart/addto/select-subscription-to-upgrade","ha: list your property: add-on":"/cart/signup/add-on","ha: list your property: confirm":"/cart/signup/confirm","ha: list your property: cross sell":"/cart/signup/cross-sell","ha: list your property: get help learn more":"/cart/signup/get-help-learn-more","ha: list your property: get help referral":"/cart/signup/get-help-referral","ha: list your property: payment":"/cart/signup/payment","ha: list your property: pm admin tool":"/cart/signup/pm-admin-tool","ha: list your property: pm directory entry":"/cart/signup/pm-directory-entry","ha: list your property: ppb learn more":"/cart/signup/ppb-learn-more","ha: list your property: ppb registration form":"/cart/signup/ppb-registration-form","ha: list your property: pps learn more":"/cart/signup/pps-learn-more","ha: list your property: pps registration form":"/cart/signup/pps-registration-form","ha: list your property: register":"/cart/signup/register","ha: list your property: search position":"/cart/signup/search-position","ha: new property: add-on":"/cart/new-property/add-on","ha: new property: confirm":"/cart/new-property/confirm","ha: new property: cross sell":"/cart/new-property/cross-sell","ha: new property: cyp":"/cart/new-property/cyp","ha: new property: payment":"/cart/new-property/payment","ha: new property: search position":"/cart/new-property/search-position","ha: one step renewal: confirm":"/cart/one-step-renewal/confirm","ha: one step renewal: payment":"/cart/one-step-renewal/payment","ha: ppb new property: account info":"/cart/ppb-new-property/account-info","ha: ppb new property:register":"/cart/ppb-new-property/register","ha: ppb new property:rental policy":"/cart/ppb-new-property/rental-policy","ha: ppb renewal: account info":"/cart/ppb-renewal/account-info","ha: ppb renewal: cyp":"/cart/ppb-renewal/cyp","ha: ppb renewal:register":"/cart/ppb-renewal/register","ha: ppb renewal:rental policy":"/cart/ppb-renewal/rental-policy","ha: ppb signup: account info":"/cart/ppb-signup/account-info","ha: ppb signup: basic listing description":"/cart/ppb-signup/basic-listing-description","ha: ppb signup: basic listing photos":"/cart/ppb-signup/basic-listing-photos","ha: ppb signup: lyp":"/cart/ppb-signup/lyp","ha: ppb signup:listingbuilder where":"/cart/ppb-signup/listingbuilder-where","ha: ppb signup:register":"/cart/ppb-signup/register","ha: ppb signup:rental policy":"/cart/ppb-signup/rental-policy","ha: renewal: add-on":"/cart/renewal/add-on","ha: renewal: confirm":"/cart/renewal/confirm","ha: renewal: cross sell":"/cart/renewal/cross-sell","ha: renewal: payment":"/cart/renewal/payment","ha: renewal: search position":"/cart/renewal/search-position","ha: renewal: select listings to renew":"/cart/renewal/select-listings-to-renew","ha: special offer: confirm":"/cart/special-offer/confirm","ha: special offer: payment":"/cart/special-offer/payment","haolb : traveler checkout page":"/traveler/booking/checkout","haolb : traveler confirmation page":"/traveler/booking/confirmation","haolb : traveler payment page":"/traveler/booking/payment","haolb : traveler rules policies page":"/traveler/booking/rulespolicies","haolb : traveler trip protection page":"/traveler/booking/tripprotection","owner login":"/owner/login/login","payment: offline traveler checkout page":"/traveler/bookingpayment/offlinecheckout","payment: offline traveler payments confirmation page":"/traveler/bookingpayment/offlineconfirmation","payment: traveler payments confirmation page":"/traveler/bookingpayment/confirmation","payment: traveler rules policies page":"/traveler/bookingpayment/rulespolicies","payment: traveler trip protection page":"/traveler/bookingpayment/tripprotection","reviews:submitted":"/traveler/review/submitted","reviews:write":"/traveler/review/write","traveler login":"/traveler/login/login","traveler payment protection confirmation":"/traveler/paymentprotection/confirmation","traveler payment protection form":"/traveler/paymentprotection/form","vas: traveler checkout page":"/traveler/bookingvas/checkout","vas: traveler confirmation page":"/traveler/bookingvas/confirmation","write review":"/traveler/review/writereview"},staticVPVs:{inquirymodal:"/traveler/property/contactownermodal",bookingmodal:"/traveler/property/bookingmodal",quoteattempt:"/traveler/property/quoteattempt",quotesuccess:"/traveler/property/quotesuccess",quotefailure:"/traveler/property/quotefailure",reviewsubmit:"/traveler/review/submitreview","owner registration":"/owner/cart/registration","inquiry confirmation":"/traveler/inquiry/submitted","booking confirmation":"/traveler/booking/success"},dimensionExtractors:{appName:"appname",appVersion:"appversion",1:function(e,t,n){return t.extractors.getVisitorId(e,t,n)},2:"pagetype",3:"pagename",4:"geonode",5:function(e,t,n){return t.extractors.getEntryPageName(e,t,n)},6:"visitortype",7:function(e,t,n){return t.extractors.getBrand(e,t,n)},8:function(e,t,n){return t.extractors.getUrl(e,t,n)},9:function(e,t,n){return t.extractors.getPPC(e,t,n)},11:"geonodelevel",12:"inquiryid",13:"eventquoteid",14:"propertyid",16:function(e){return e.getListingIds()},17:"reservationid",19:function(e,t,n){return t.extractors.getICID(e,t,n)},20:function(e,t,n){return t.extractors.getEntryPageType(e,t,n)},23:"registrationtype",24:function(e,t,n){return t.extractors.getSearchTerm(e,t,n)},25:"numresults",26:"publicuuid",27:function(e,t,n){return t.extractors.getCalendarLastUpdated(e,t,n)},29:"searchviewtopdp",32:"searchtype",33:"sort",34:"sortproctor",35:function(e,t,n){return t.extractors.getPDPEntryDate(e,t,n)},40:"ownerpublicuuid",41:"searchview",42:"inquirydetails",43:"testattributes",51:"item1",52:"propertytype",53:"onlinepayments",54:"translated",55:"numreviews",56:"multiunit",57:"item2",58:"responsivenesstime",59:"responsivenessrate",60:"item4",61:"item3",62:"pmid",63:"servicefee",81:function(e,t,n){return t.extractors.getICID(e,t,n)},82:function(e,t){return t.extractors.getEDAPIntegrationsVersion(e,t)},83:"lengthofstay",84:"paymentmethod",85:function(e,t){return t.extractors.getTripDates(e)},86:"refinebucket",87:"refinevalue",88:function(e,t){return t.extractors.getRangeSet(e,t,"minsleeps","maxsleeps")},89:function(e,t){return t.extractors.getRangeSet(e,t,"minprice","maxprice")},90:function(e,t){return t.extractors.getRangeSet(e,t,"minbeds","maxbeds")},91:function(e,t){return t.extractors.getRangeSet(e,t,"minbaths","maxbaths")},92:"locationtype",93:"lbsuuid",94:function(e,t){return t.extractors.getHaVisitorID()},95:function(e,t){return t.extractors.getHaSessionID()},97:"proctor",98:"paymentsplit",100:"mpaasregion",101:function(e,t){return t.extractors.getNumGuests(e)},106:"hearttype",107:"heartid",108:"ownertype",109:"edapeventid",110:"edapeventname",111:"currentpageviewid",112:"parentpageviewid",113:"displayprice",114:"fullorderrentalrate",115:"displayquotetotal",116:"partnerfeesamount",117:"numpartnerfees",118:"servicefeeamount",119:"ordertax",120:"rdd",121:"pdp",122:function(e,t){return t.extractors.getCurrency(e)}}}}),r("ua/dimension-extractors",["domhelpers","adlhelpers"],function(e,t){"use strict";function n(){this.parseEntryInfoCookie=function(t){var n,r,o,i,a=t.getConfig(),s=e.getCookie(a.entryInfoCookie),u=a.entryInfoCookieFormat,c={},l=e.getWindow();for(n=null===s?[]:s.split(":"),o=0,i=u.length;i>o;o++)r=n[o],void 0===r&&(r="-1"),c[u[o]]=l.decodeURIComponent(r);return c},this.updateValueEntryInfoCookie=function(t,n,r){var o,i,a,s=t.getConfig(),u=this.parseEntryInfoCookie(t),c=s.entryInfoCookieFormat,l=e.getWindow(),p=[];for(i=0,a=c.length;a>i;i++)o=n[c[i]],void 0!==n[c[i]]?o=n[c[i]]:u[c[i]]&&(o=u[c[i]]),void 0===o&&(o="-1"),p.push(l.encodeURIComponent(o));e.setCookie(s.entryInfoCookie,p.join(":"),r,30)},this.getVisitorId=function(e,t,n){var r,o=n.get("clientId");return o?r=o:(t.uaEdap.error("could not get UA clientid, skipping..."),r="-1"),r},this.getEntryPageName=function(e,t){var n,r=this.parseEntryInfoCookie(t),o=t.getUAProfileData(),i=o[1];return n=r.entrypagename,"-1"===n?(n=e.get("pagename"),this.updateValueEntryInfoCookie(t,{entrypagename:n},i)):this.updateValueEntryInfoCookie(t,{entrypagename:n},i),n},this.getEntryPageType=function(e,t){var n,r=this.parseEntryInfoCookie(t),o=t.getUAProfileData(),i=o[1];return n=r.entrypagetype,"-1"===n?(n=e.get("pagetype"),this.updateValueEntryInfoCookie(t,{entrypagetype:n},i)):this.updateValueEntryInfoCookie(t,{entrypagetype:n},i),n},this.getBrand=function(e){return e.isSet("monikerbrand")?e.get("monikerbrand"):e.isSet("brand")?e.get("brand"):"-1"},this.getUrl=function(t,n){var r="-1";try{r=e.getPage()}catch(o){n.uaEdap.error("Error when extracting UA url: "+o.message)}finally{return r}},this.getSearchTerm=function(e){return e.isSet("searchterm")?e.get("searchterm"):e.isSet("keywords")?e.get("keywords"):"-1"},this.getCalendarLastUpdated=function(e){return e.isSet("calendarlastupdated")?e.get("calendarlastupdated"):e.isSet("calendarupdated")?e.get("calendarupdated"):"-1"},this.getPDPEntryDate=function(e){var t,n;return"property"===e.get("pagetype")?(t=e.get("startdate"),n=e.get("enddate"),"string"==typeof t&&t.length>0&&"string"==typeof n&&n.length>0?"dates on PDP":"no dates"):"-1"},this.getProctorDimension=function(e){var n,r=e.get("proctor"),o=new t;switch((void 0===r||null===r||""===r)&&(r="-1"),o.get("pagetype")){case"booking":case"booking payment":n=["48",r];break;case"cart":n=["30",r];break;case"travelerdash":n=["96",r];break;case"home":n=["99",r];break;case"lyp":n=["46",r];break;case"ownerdash":n="global-dashboard-ui"===e.get("appname")?["44",r]:["28",r];break;case"search landing page":n="landingpageapp"===e.get("appname")?["102",r]:["-1","-1"];break;case"search":case"property":case"inquiry":case"inquiry confirmation":n=["38",r];break;default:n=["-1","-1"]}return n},this.getPPC=function(){var t=e.getSearchParam("k_clickid");return t||"-1"},this.getICID=function(){var t=e.getSearchParam("icid");return t||"-1"},this.getEDAPIntegrationsVersion=function(t){var n=e.getEdapIntegrationsVersion();return t.shouldSet(n)?n:"unknown"},this.getTripDates=function(e){var t,n="startdate",r="enddate",o="event"+n,i="event"+r,a="-1";return e.isSet(o)&&e.isSet(i)?t=[e.get(o),e.get(i)]:e.isSet(n)&&e.isSet(r)&&(t=[e.get(n),e.get(r)]),t&&(a=t.join(",")),a},this.getNumGuests=function(e){function t(e){return void 0===e?n:e}var n="-1";return[t(e.isSetGet("numadults")),t(e.isSetGet("numchildren")),t(e.isSetGet("numinfants")),t(e.isSetGet("withpets"))].join(",")},this.getRangeSet=function(e,t,n,r){var o,i,a="-1";return n&&r?e.isSet(n)||e.isSet(r)?(o=void 0===e.isSetGet(n)?a:e.get(n),i=void 0===e.isSetGet(r)?a:e.get(r),o+","+i):a:(t.uaEdap.error('getRangeSet: Incorrect min/maxKey parameters: minKey:"'+n+'" maxKey:"'+r+'"'),a)},this.getHaVisitorID=function(){return e.getCookie("hav")||"-1"},this.getHaSessionID=function(){return e.getCookie("has")||"-1"},this.getCurrency=function(e){return e.isSet("eventquotecurrency")?e.get("eventquotecurrency"):e.isSet("currency")?e.get("currency"):"-1"}}return new n}),r("ua/ua-wrapper",["edap","adlhelpers","domhelpers","doneable","debughelpers","ua/dimension-extractors","ua/ua-config","edaphelpers"],function(e,t,n,r,o,i,a,s){"use strict";function u(){var u;this.extractors=i,this.uaEdap=e,this.globalADL=new t,this.parseClientIdFromUACookie=function(e){var t;return"string"!=typeof e?null:(t=e.split("."),4!==t.length||0!==e.indexOf("GA")?(this.uaEdap.error("Unrecognized UA cookie format: "+e),null):[t[2],t[3]].join("."))},this.logUAAction=function(t,n){var r;return null===this.uaEdap?void e.error("Could not log UA event: "+[t,n].join(",")):(r=this.uaEdap.getData(),r.uaevents=r.uaevents||[],void r.uaevents.push([t,n]))},this.dimName=function(e){return"dimension"+e},this.determineDimName=function(e){var t=parseInt(e,10);return isNaN(t)?e:this.dimName(t)},this.metricName=function(e){return"metric"+e},this.getConfig=function(){return a},this.getUA=function(){return n.getWindow()[this.getConfig().uaNS]},this.truncateDimensionByUTF8Bytes=function(e,t){function n(e){return unescape(encodeURIComponent(e))}function r(e){return decodeURIComponent(escape(e))}var o,i=!1,a=e;if(o=n(e).substring(0,t),o.length<t)return e;for(;!i;){try{a=r(o),i=!0}catch(s){}o=o.substring(0,o.length-1)}return a},this.buildUaFunctionName=function(e){return[this.getConfig().uaTrackerName,e].join(".")},this.logTruncationErrors=function(e){var t,n,r=this.getConfig(),o=r.maxDimensionBytes,i={dimension8:!0,dimension97:!0},a=[];for(n=0;n<e.length;n++)t=e[n].dimName,i[t]||a.push(t);a.length>0&&this.uaEdap.error(["UA: the following Custom Dimensions were truncated because they were longer than ",o," bytes: ",a.join(", ")," (see http://h.a/edapdimensionmapping for more info)"].join(""))},this.setUADimension=function(e,t){var n=this.getConfig(),r=n.maxDimensionBytes;"number"==typeof e&&(e=this.dimName(e)),t=this.truncateDimensionByUTF8Bytes(t,r),this.setUAParam(e,t)},this.setUADimensions=function(e){var t;for(t in e)e.hasOwnProperty(t)&&(isNaN(parseInt(t,10))||(t=parseInt(t,10)),this.setUADimension(t,e[t]))},this.setUAParam=function(e,t){var n=this.getUA();n(this.buildUaFunctionName("set"),e,t)},this.loadPlugin=function(){var e,t,n=[this.buildUaFunctionName("require")],r=this.getUA();for(e=0,t=arguments.length;t>e;e++)n.push(arguments[e]);r.apply(r,n)},this.dropScript=function(){var e,t=this,r=t.getConfig(),i=n.getWindow(),a=r.uaScriptUrl;return o.isInDebugMode(r.edapScopeName)&&(a=r.uaDebugScriptUrl),i.GoogleAnalyticsObject=r.uaNS,i[r.uaNS]=t.getUA()||function(){(i[r.uaNS].q=t.getUA().q||[]).push(arguments)},i[r.uaNS].l=1*new Date,t.uaEdap.trigger("ua.load"),e=n.getMsFromEpoch(),i[r.uaNS](function(){var r=n.getMsFromEpoch(),o=r-e;t.uaEdap.trigger("ua.did.load",{loadtime:""+o})}),n.loadScript(a,r.scriptId)},this.mergeOptions=function(e,t){function n(t){return function(){try{t.apply(t)}catch(n){i.uaEdap.error(n)}finally{e.hitCallback()}}}var r,o,i=this;for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)?"hitCallback"===o&&"function"==typeof t[o]&&(r=t[o],t[o]=n(r)):t[o]=e[o]);return t},this.setDimensionsInOpts=function(e,n,r,o){var i,a,s=this;return e&&(i=new t(e),r=r||{},n.page=s.getPageUrl(i),r.skipExtractDimensions||(a=s.buildCustomDimensions(i,o),n=s.mergeOptions(n,a))),n},this.callWithTracker=function(e){var t=this,n=t.getUA(),r=t.getConfig().uaTrackerName;u?e(u):n.apply(t,[function(){u=t.getUA().getByName(r),e(u)}])},this.resetTrackerCache=function(){u=void 0},this.checkUaHitFields=function(e,t){var n,r,o=this;for(r in t)if(t.hasOwnProperty(r))if(n=t[r],"value"===r){if(isNaN(parseFloat(n,10)))return o.uaEdap.error("UA "+e+" requires "+r+" to be numeric"),!1}else if("string"!=typeof n)return o.uaEdap.error("UA "+e+" requires "+r+" to be defined string"),!1;return!0},this.sendEvent=function(e,t,n,o,i,a,s){function u(u){return new r(function(r){var l=[c.buildUaFunctionName("send"),"event",e,t,n,o],p=c.getUA(),d={nonInteraction:!0,hitCallback:function(){r()}},g=d;g=c.setDimensionsInOpts(a,g,s,u),"object"==typeof i&&(g=c.mergeOptions(g,i)),l.push(g),p.apply(p,l),c.logUAAction("Event",l)},{error:function(e){c.uaEdap.error(e)}})}var c=this;return new r(function(n){c.checkUaHitFields("event",{category:e,action:t}),c.callWithTracker(function(e){u(e).then(n)})},{error:function(e){c.uaEdap.error(e)}})},this.sendPageview=function(e,n,o){var i=this;return new r(function(r){i.callWithTracker(function(a){var u,c,l,p=[i.buildUaFunctionName("send"),"pageview"],d=i.getUA(),g={hitCallback:function(){r()}},f=g;o=o||{},e=e||i.globalADL.get(),e=s.clone(e),u=new t(e),o.pagetypeOverride&&u.set("pagetype",o.pagetypeOverride),o.pageurlOverride&&u.set("pageurl",o.pageurlOverride),l=i.getPageUrl(u),p.push(l),c=i.buildCustomDimensions(u,a,{shouldLogTruncation:!o.skipGlobalExtractDimensions}),o.skipGlobalExtractDimensions?f=i.mergeOptions(f,c):i.setUADimensions(c),"object"==typeof n&&(f=i.mergeOptions(f,n)),p.push(f),d.apply(d,p),i.logUAAction("Pageview",p)})},{error:function(e){i.uaEdap.error(e)}})},this.buildInteractionVpvPagetype=function(e){return e+" (vpv)"},this.sendInteractionPageview=function(e,t,n,r){return this.sendPageview(e,r,{pageurlOverride:t,pagetypeOverride:n,skipGlobalExtractDimensions:!0})},this.sendTiming=function(e,t,n,o,i,a,s){var u=this;return new r(function(r){u.checkUaHitFields("timing",{category:e,name:t,value:n}),u.callWithTracker(function(c){var l=[u.buildUaFunctionName("send"),"timing",e,t,n,o],p=u.getUA(),d={nonInteraction:!0,hitCallback:function(){r()}};i="object"!=typeof i?d:u.mergeOptions(d,i),i=u.setDimensionsInOpts(a,i,s,c),l.push(i),p.apply(p,l),u.logUAAction("Timing",l)})},{error:function(e){u.uaEdap.error(e)}})},this.sendSocial=function(e,t,n,o){var i=this;return new r(function(r){var a=[i.buildUaFunctionName("send"),"social",e,t,n],s=i.getUA(),u={nonInteraction:!0,hitCallback:function(){r()}};"object"!=typeof o?a.push(u):a.push(i.mergeOptions(u,o)),s.apply(s,a),i.logUAAction("Social",a)},{error:function(e){i.uaEdap.error(e)}})},this.sendException=function(e,t,n){var o=this;return new r(function(r){var i=[o.buildUaFunctionName("send"),"exception"],a=o.getUA(),s={exDescription:e,exFatal:!!t,nonInteraction:!0,hitCallback:function(){r()}};"object"!=typeof n?i.push(s):i.push(o.mergeOptions(s,n)),a.apply(a,i),o.logUAAction("Exception",i)},{error:function(e){o.uaEdap.error(e)}})},this.addEcommTransaction=function(e,t,n,r,o){var i=this.getUA(),a={id:e,affiliation:t||void 0,revenue:n||void 0,shipping:r||void 0,tax:o||void 0};i(this.buildUaFunctionName("ecommerce:addTransaction"),a),this.logUAAction("Ecomm:addTransaction",a)},this.addEcommItem=function(e,t,n,r,o,i){var a=this.getUA(),s={id:e,name:t,sku:n||void 0,category:r||void 0,price:o||void 0,quantity:i||void 0};a(this.buildUaFunctionName("ecommerce:addItem"),s),this.logUAAction("Ecomm:addItem",s)},this.clearEcommCart=function(){var e=this.getUA();e(this.buildUaFunctionName("ecommerce:clear")),this.logUAAction("Ecomm:clearCart")},this.sendEcomm=function(e){var t=this;return new r(function(n){var r=[t.buildUaFunctionName("ecommerce:send")],o=t.getUA(),i={nonInteraction:!0,hitCallback:function(){n()}};"object"!=typeof e?r.push(i):r.push(t.mergeOptions(i,e)),o.apply(o,r),t.logUAAction("Ecomm:Send",r)},{error:function(e){t.uaEdap.error(e)}})},this.getUAProfileData=function(){var e,r,o,i=this.getConfig(),a=new t,s=a.get("appname"),u={luxury_us:"homeaway_us",luxury_uk:"homeaway_uk",luxury_de:"homeaway_de"};return a.isSet("analyticsbrand")&&i.supportedSites[a.get("analyticsbrand")]&&(e=a.get("analyticsbrand")),"ums-cas"===s?(void 0===e&&(e=a.get("monikerbrand")),u[e]&&(e=u[e]),r=i.supportedSites[e],void 0!==r?(r[1]=n.getHostname(),r[2]="/"):e=""):(void 0===e&&(e=this.getMonikerBrandByHref(n.getHref())),r=i.supportedSites[e],r instanceof Array&&null===r[1]&&(r[1]=n.getHostname())),""===e?(o="UA init: Cannot find matching profile name",this.uaEdap.error(o),null):r},this.buildSiteRegex=function(e){var t,n,r,o,i,a=1,s=3,u=4,c=5;if(!(e instanceof Array))return i="UA buildSiteRegex is expecting an array",this.uaEdap.error(i),null;if(e[c])return null;if(null===e[s]){if(null===e[a])return i="UA buildSiteRegex: cannot build regex since domain and regex are null",this.uaEdap.error(i),null;t=e[a],t=t.replace(/[.]/gi,"[.]"),n=new RegExp("^https?:[/][/]([^/]+[.])?"+t+"(:\\d+)?([/].*$|$)")}else n=e[s];return null===e[u]?(o=e[a].split("."),r=o.length):r=e[u],[n,r]},this.getMonikerBrandByHref=function(e){var t,n,r,o=this.getConfig().supportedSites,i="",a=0;for(t in o)if(o.hasOwnProperty(t)&&(n=this.buildSiteRegex(o[t]),null!==n&&null!==e.match(n[0])))if(n[1]>a)a=n[1],i=t;else if(n[1]===a)return r="UA getMonikerBrandByHref: "+e+" matched "+i+" and "+t,this.uaEdap.error(r),"";return i},this.getPageUrl=function(e){var t,r=this,o=r.getConfig(),i=null;return t=e.get("pagename"),"string"==typeof t&&(t=t.toLowerCase()),i=e.isSet("pageurl")?r.vpvizePath(e.get("pageurl")):t&&o.pagenameToVPV.hasOwnProperty(t)?r.vpvizePath(o.pagenameToVPV[t]):n.getPage()},this.vpvizePath=function(e){var t="/vpv",n=e;return"string"==typeof e?n=0===e.indexOf(t+"/")?e:0===e.indexOf("/")?t+e:t+"/"+e:null},this.buildCustomDimensions=function(e,n,r){function o(e,t){var n=s.determineDimName(e),r=s.truncateDimensionByUTF8Bytes(t,u.maxDimensionBytes);r!==t&&l.push({dimName:n,originalValue:t,truncatedValue:r}),p[n]=r}var i,a,s=this,u=s.getConfig(),c=u.dimensionExtractors,l=[],p={};if(r=r||{},!(e instanceof t))return s.uaEdap.error("buildCustomDimensions: called without ADL instance"),p;if("object"!=typeof n)return s.uaEdap.error("buildCustomDimensions: called without tracker"),p;for(i in c)c.hasOwnProperty(i)&&(a=s.getDimensionValue(i,e,n),e.shouldSet(a)&&o(i,a));return i=this.extractors.getProctorDimension(e),e.shouldSet(i[1])&&o(i[0],i[1]),r.shouldLogTruncation&&s.logTruncationErrors(l),p},this.getDimensionValue=function(e,t,n){var r,o=this.getConfig(),i=o.dimensionExtractors,a=i[e],s=typeof a;return i.hasOwnProperty(e)?"string"===s?r=t.get(a):"function"===s?r=a.apply(this,[t,this,n]):this.uaEdap.error('getDimensionValue: unexpected type "'+s+'" for dimension '+e):this.uaEdap.error("getDimensionValue: attempted to lookup a dimension not present in the UA config"),null!==r&&void 0!==r&&"function"==typeof r.toString&&(r=r.toString()),r},this.checkIfNewUser=function(){var t=this.getConfig(),r=t.uaCookieName,o=t.edapScopeName,i=n.getCookie(r),a=e.getScopeData(o);return a.isNewUser=null===i,a.isNewUser},this.init=function(){var t,r,o,i=e.getScopeInfo()[this.getConfig().edapScopeName],a=this.getConfig(),s={},u=!1;return i?(this.uaEdap=i.instance,r=this.getUAProfileData(),
null===r?u:"DEV"===r[0]?u:(this.dropScript(),(o=this.getUA())?(u=!0,t=this.parseClientIdFromUACookie(n.getSearchParam(a.uaCrossDomainParam)),s={cookieDomain:r[1],cookiePath:r[2]},"string"==typeof t&&(s.clientId=t),this.globalADL.isSet("publicuuid")&&(s.userId=this.globalADL.get("publicuuid")),s.name=a.uaTrackerName,s.trackingId=r[0],o("create",s),this.setUAParam("transport","beacon"),this.loadPlugin("displayfeatures"),u):(this.uaEdap.error("Cannot init UA: Unable to get UA instance"),u))):(e.error("Could not find UA EDAP Scope... aborting UA init()"),u)}}return new u}),r("ua/ecomm",["ua/ua-wrapper"],function(e){"use strict";function t(e){var t,n,r=["productid","productname","productcategory","productquantity","productprice","ordertotal","orderid","paymentmethod"];for(t=0;t<r.length;t++)if(n=e[r[t]],void 0===n||null===n)return!1;return!0}function n(){var e,t,n=arguments;for(t=n[0].length,e=0;e<n.length;e++)if(n[e].length!==t)return!1;return!0}function r(){i.uaEcommPluginLoaded()||(e.loadPlugin("ecommerce"),o=!0)}var o=!1,i={};return i.trackEcommerce=function(o){var i,a,s,u,c,l,p,d,g,f,h=/[,;]/;if(o=o||{},o.orderid&&"-1"!==o.orderid||(o.orderid=o.reservationid||o.bookingid),!t(o))return null;if(i=o.productid.split(h),a=o.productname.split(h),s=o.productcategory.split(h),u=o.productquantity.split(h),c=o.productprice.split(h),l="undefined"!=typeof o.ordertax?o.ordertax:0,p=o.ordertotal,d=o.orderid,g=o.paymentmethod,!n(i,a,s,u,c))return null;for(r(),e.clearEcommCart(),e.addEcommTransaction(d,g,p,void 0,l),f=0;f<i.length;f++)e.addEcommItem(d,a[f],i[f],s[f],c[f],u[f]);return e.sendEcomm()},i.uaEcommPluginLoaded=function(){return o},i}),r("ua/listeners/cart",["ua/ua-wrapper","ua/ecomm","ua/ua-config","doneable","adlhelpers"],function(e,t,n,r,o){"use strict";function i(i){var a="confirm";i.on("owner.registration.submit",function(t,i,a){var s=n.staticVPVs["owner registration"],u={},c=new o(t);i(),u[e.metricName(11)]=1,r.all([e.sendInteractionPageview(t,s,e.buildInteractionVpvPagetype(t.pagetype)),e.sendEvent("registration","owner registration",c.getPublicUUID(),void 0,u,t)]).then(a)}),i.on("cart.signup.submit",function(n,o,i){var s={};o(),s[e.metricName(12)]=1,r.all([t.trackEcommerce(n),e.sendEvent("signup cart",a,n.orderid,void 0,s,n)]).then(i)}),i.on("cart.newsubscription.submit",function(n,o,i){var s={};o(),s[e.metricName(12)]=1,r.all([t.trackEcommerce(n),e.sendEvent("newproperty cart",a,n.orderid,void 0,s,n)]).then(i)}),i.on("cart.addto.submit",function(n,o,i){o(),r.all([t.trackEcommerce(n),e.sendEvent("addto cart",a,n.orderid,void 0,void 0,n)]).then(i)}),i.on("cart.renew.submit",function(n,o,i){o(),r.all([t.trackEcommerce(n),e.sendEvent("renewal cart",a,n.orderid,void 0,void 0,n)]).then(i)}),i.on("cart.specialoffer.submit",function(n,o,i){o(),r.all([t.trackEcommerce(n),e.sendEvent("specialoffer cart",a,n.orderid,void 0,void 0,n)]).then(i)})}return{setupListeners:i}}),r("ua/listeners/flsp",["ua/ua-wrapper"],function(e){"use strict";function t(t){t.on("featuredlisting.click",function(t,n,r){n(),e.sendEvent("merchandising","featured listing",t.eventlistingids,void 0,void 0,t).then(r)}),t.on("similarproperty.click",function(t,n,r){n(),e.sendEvent("merchandising","similar property",t.eventlistingids,void 0,void 0,t).then(r)})}return{setupListeners:t}}),r("ua/listeners/identity",["ua/ua-wrapper","adlhelpers"],function(e,t){"use strict";function n(n){function r(n,r,i){var a=new t(n),s="-1",u=a.get("logintype")||s,c=a.get("loginsource")||s;r(),e.sendEvent(o,a.get("edapeventname").replace("."," "),u+":"+c,void 0,void 0,n).then(i)}var o="login";n.on("user.account.created",function(r,o,i){var a,s,u=new t(r),c="unknown",l="default",p=u.isSetGet("newusertype")||c,d={"true":"stub account","false":"full account","default":c},g={"true":"remarketing opt-out","false":"no remarketing opt-out","default":"remarketing opt-out not presented"};a=d[u.isSetGet("stubaccount")||l],s=g[u.isSetGet("marketingoptout")||l],p===c&&n.error("'user.account.created' triggered without 'newusertype' property set"),o(),e.sendEvent("account creation",p,[a,s].join(":"),void 0,void 0,r).then(i)}),n.on("login.attempt",r),n.on("login.success",r),n.on("login.failure",r)}return{setupListeners:n}}),r("ua/listeners/partner-conversion",["ua/ua-wrapper","adlhelpers"],function(e,t){"use strict";function n(n){var r="unknown";n.on("listing.onboarding.started",function(o,i,a){var s,u=new t(o),c={"true":"new supplier","false":"existing supplier","default":r};s=c[u.isSetGet("newsupplier")||"default"],s===r&&n.error("'listing.onboarding.started' triggered without 'newsupplier' property set"),i(),e.sendEvent("supplier onboarding","started",s,void 0,void 0,o).then(a)}),n.on("listing.onboarding.submit",function(o,i,a){var s,u=new t(o),c={"true":"new supplier","false":"existing supplier","default":r};s=c[u.isSetGet("newsupplier")||"default"],s===r&&n.error("'listing.onboarding.submit' triggered without 'newsupplier' property set"),i(),e.sendEvent("supplier onboarding completion",s,void 0,void 0,void 0,o).then(a)}),n.on("owner.lyp.click",function(t,n,r){n(),e.sendEvent("supplier onboarding","lyp module clicked",t.actionlocation,void 0,void 0,t).then(r)})}return{setupListeners:n}}),r("ua/listeners/ppb",["ua/ua-wrapper"],function(e){"use strict";function t(t){var n="ppb",r="completion";t.on("ppb.signup.submit",function(t,o,i){o(),e.sendEvent(n,"signup",r,void 0,void 0,t).then(i)}),t.on("ppb.newproperty.submit",function(t,o,i){o(),e.sendEvent(n,"new property",r,void 0,void 0,t).then(i)}),t.on("ppb.renewal.submit",function(t,o,i){o(),e.sendEvent(n,"renewal",r,void 0,void 0,t).then(i)})}return{setupListeners:t}}),r("ua/listeners/quote",["ua/ua-wrapper","ua/ua-config","adlhelpers","domhelpers","edaphelpers"],function(e,t,n,r,o){"use strict";function i(n){function i(n,i,a){var s=o.clone(n);"property"===s.pagetype?(s.pagetype="booking",s.pagename="traveler "+i,s.pageurl=t.staticVPVs[i]):(s.pagetype=s.pagetype+" "+i,s.pagename=s.pagename+" "+i,s.pageurl=r.getPage()+"/"+i),e.sendInteractionPageview(s,s.pageurl).then(a)}n.on("quote.attempt",function(e,t,n){t(),i(e,"quoteattempt",n)}),n.on("quote.success",function(e,t,n){t(),i(e,"quotesuccess",n)}),n.on("quote.failure",function(e,t,n){t(),i(e,"quotefailure",n)})}return{setupListeners:i}}),r("ua/listeners/rm",["ua/ua-wrapper","adlhelpers"],function(e,t){"use strict";function n(n){function r(e){var n,r=new t(e),o=r.get("reservationid"),i=r.get("inquiryid");return n=r.shouldSet(o)?o:r.shouldSet(i)?i:"-1"}var o="owner activity";n.on("conversation.message.send",function(t,n,i){"ownerdash"===t.pagetype&&(n(),e.sendEvent(o,"message sent",r(t)).then(i))}),n.on("quote.send",function(t,n,r){n(),e.sendEvent(o,"send quote",t.inquiryid).then(r)}),n.on("payment.request.submit",function(t,n,r){n(),e.sendEvent(o,"attach payment request",t.eventquoteid).then(r)}),n.on("payment.refund.submit",function(t,n,r){n(),e.sendEvent(o,"refund payment",t.quotepaymentscheduleid).then(r)}),n.on("reservation.accept.submit",function(t,n,r){n(),e.sendEvent(o,"accept booking request",t.reservationid).then(r)}),n.on("reservation.cancellation.submit",function(t,n,r){n(),e.sendEvent(o,"cancellation sent",void 0,void 0,void 0,t).then(r)}),n.on("reservation.decline.submit",function(t,n,r){n(),e.sendEvent(o,"decline booking request",t.reservationid).then(r)}),n.on("payment.cancel.submit",function(t,n,r){n(),e.sendEvent(o,"cancel payment request",t.quotepaymentscheduleid).then(r)}),n.on("payment.resend.submit",function(t,n,r){n(),e.sendEvent(o,"resend payment request",t.quotepaymentscheduleid).then(r)}),n.on("calendar.add.submit",function(t,n,i){n(),e.sendEvent(o,"add to calendar",r(t)+","+t.reservationstatus).then(i)}),n.on("calendar.uptodate.submit",function(t,n,r){n(),e.sendEvent(o,"calendar up to date").then(r)}),n.on("reservation.edit.submit",function(t,n,r){n(),e.sendEvent(o,"edit booking request").then(r)}),n.on("payment.markpaid.submit",function(t,n,r){n(),e.sendEvent(o,"mark as paid").then(r)}),n.on("payments.onboarding.submit",function(n,r,i){var a=new t(n);r(),"dash:settings:ownerpayments"===n.pagename?e.sendEvent(o,"onboard for offline payments",a.getPublicUUID()).then(i):i()}),n.on("claim.damage.click",function(n,r,i){var a=new t(n);a.isSet("reservationid")?(r(),e.sendEvent(o,"claim damage",a.get("reservationid")).then(i)):e.uaEdap.error("claim.damage.click missing reservationid property",n)}),n.on("claim.eclaim.click",function(n,r,i){var a=new t(n);a.isSet("reservationid")?(r(),e.sendEvent(o,"csa eclaims",a.get("reservationid")).then(i)):e.uaEdap.error("claim.eclaim.click missing reservationid property",n)})}return{setupListeners:n}}),r("ua/listeners/search",["adlhelpers","ua/ua-wrapper"],function(e,t){"use strict";function n(n){n.on("search.submit",function(n,r,o){var i,a=new e(n),s={};r(),s[t.metricName(3)]=1,i=a.isSetGet("searchterm")||a.isSetGet("geonode")||a.isSetGet("keyword"),t.sendEvent("search","dateless onsite search",i,void 0,s,n).then(o)}),n.on("dated.search.submit",function(n,r,o){var i,a=new e(n),s={};r(),s[t.metricName(5)]=1,i=a.isSetGet("searchterm")||a.isSetGet("geonode")||a.isSetGet("keyword"),t.sendEvent("search","dated onsite search",i,void 0,s,n).then(o)}),n.on("typeahead.query",function(e,n,r){n(),t.sendEvent("typeahead","typeahead query",e.matchtype,void 0,void 0,e).then(r)}),n.on("search.hit.click",function(e,n,r){var o;n(),o=e.actionlocation+": "+e.badges,t.sendEvent("search","search hit click",o,void 0,void 0,e).then(r)}),n.on("search.map.property.click",function(e,n,r){n(),t.sendEvent("pdp preview","click",e.eventlistingids,void 0,void 0,e).then(r)}),n.on("search.map.zoom",function(e,n,r){var o;n(),o="zoom "+e.zoomtype,t.sendEvent("search","map",o,void 0,void 0,e).then(r)}),n.on("search.map.move",function(e,n,r){n(),t.sendEvent("search","map","move",void 0,void 0,e).then(r)})}return{setupListeners:n}}),r("ua/listeners/component-interaction",["adlhelpers","ua/ua-wrapper"],function(e,t){"use strict";function n(e){var n="component interaction";e.on("page.module.view",function(e,r,o){r(),t.sendEvent(n,"module view",e.actionlocation,void 0,void 0,e).then(o)}),e.on("property.tile.click",function(e,r,o){r(),t.sendEvent(n,"property tile click",e.actionlocation,void 0,void 0,e).then(o)}),e.on("refinement.click",function(e,r,o){r(),t.sendEvent(n,"refinement click",e.eventrefinements,void 0,void 0,e).then(o)}),e.on("search.link.click",function(e,r,o){r(),t.sendEvent(n,"search link click",e.actionlocation,void 0,void 0,e).then(o)}),e.on("destination.link.click",function(e,r,o){r(),t.sendEvent(n,"destination link click",[e.eventlbsuuid,e.actionlocation].join(":"),void 0,void 0,e).then(o)}),e.on("region.link.click",function(e,r,o){r(),t.sendEvent(n,"region link click",[e.eventlbsuuid,e.actionlocation].join(":"),void 0,void 0,e).then(o)}),e.on("recentactivity.continue.click",function(e,r,o){r(),t.sendEvent(n,"recentactivity continue click",e.eventlbsuuid,void 0,void 0,e).then(o)}),e.on("recentactivity.view",function(e,r,o){r(),t.sendEvent(n,"recentactivity view",e.eventsearchterm,void 0,void 0,e).then(o)}),e.on("recentactivity.viewall.click",function(e,r,o){r(),t.sendEvent(n,"recentactivity viewall click",[e.eventrequestmarker,e.actionlocation].join(":"),void 0,void 0,e).then(o)})}return{setupListeners:n}}),r("ua/listeners/social",["ua/ua-wrapper","domhelpers","doneable","adlhelpers"],function(e,t,n,r){"use strict";function o(o){function i(e){return"property"===e.get("pagetype")?e.getListingIds():t.getHref()}var a="social";o.on("social.list.reveal",function(t,n,o){var i=new r(t);n(),e.sendEvent("traveler activity","share clicked",i.getPublicUUID()).then(o)}),o.on("social.email.click",function(t,n,o){var i=new r(t);n(),e.sendEvent("traveler activity","share email clicked",i.getPublicUUID()).then(o)}),o.on("social.email.sent",function(t,n,o){var i=new r(t);n(),e.sendEvent("traveler activity","share email sent",i.getPublicUUID()).then(o)}),o.on("social.facebook.like",function(o,s,u){var c=new r(o);s(),"on"===o.actionstate?n.all([e.sendEvent(a,"facebook like",i(c)),e.sendSocial("facebook","like",t.getHref())]).then(u):"off"===o.actionstate&&n.all([e.sendEvent(a,"facebook unlike",i(c)),e.sendSocial("facebook","unlike",t.getHref())]).then(u)}),o.on("social.facebook.share",function(o,s,u){var c=new r(o);s(),n.all([e.sendEvent(a,"facebook share",i(c)),e.sendSocial("facebook","share",t.getHref())]).then(u)}),o.on("social.google.plus1",function(o,s,u){var c=new r(o);s(),n.all([e.sendEvent(a,"google plus",i(c)),e.sendSocial("google","plus1",t.getHref())]).then(u)}),o.on("social.pinterest.pin",function(o,s,u){var c=new r(o);s(),n.all([e.sendEvent(a,"pinterest",i(c)),e.sendSocial("pinterest","pin",t.getHref())]).then(u)}),o.on("social.twitter.tweet",function(o,s,u){var c=new r(o);s(),n.all([e.sendEvent(a,"tweet",i(c)),e.sendSocial("twitter","tweet",t.getHref())]).then(u)}),o.on("social.linkedin.share",function(o,s,u){var c=new r(o);s(),n.all([e.sendEvent(a,"linkedin share",i(c)),e.sendSocial("linkedin","share",t.getHref())]).then(u)})}return{setupListeners:o}}),r("ua/listeners/software",["ua/ua-wrapper"],function(e){"use strict";function t(t){var n=t.getDL();"marketing"===n.pagetype&&"pmsc"===n.pagename&&(t.on("software.search.submit",function(t){e.sendEvent("owner activity","software search",t.eventlabel||"undefined")}),t.on("software.provider.click",function(t){e.sendEvent("owner activity","partner link click",t.eventlabel||"undefined")}))}return{setupListeners:t}}),r("ua/listeners/traveler-activity",["ua/ua-wrapper","ua/ua-config","adlhelpers","doneable"],function(e,t,n,r){"use strict";function o(o){o.on("datepicker.open",function(t,n,r){n(),e.sendEvent("datepicker","open",t.actionlocation,void 0,void 0,t).then(r)}),o.on("datepicker.dates.selected",function(t,n,r){n(),e.sendEvent("datepicker","dates change",t.actionlocation,void 0,void 0,t).then(r)}),o.on("datepicker.dates.cleared",function(t,n,r){n(),e.sendEvent("datepicker","dates clear",t.actionlocation,void 0,void 0,t).then(r)}),o.on("listing.compare.toggle",function(t,n,r){n(),"on"===t.actionstate?e.sendEvent("compare","checkbox").then(r):"off"===t.actionstate&&e.sendEvent("compare","uncheckbox").then(r)}),o.on("listing.compare.submit",function(t,n,r){n(),e.sendEvent("compare","submit").then(r)}),o.on("listing.favorite.click",function(t,r,o){var i=new n(t);r(),e.sendEvent("favorite","favorite clicked",i.getPublicUUID()).then(o)}),o.on("listing.favorite.toggle",function(t,r,o){var i=new n(t),a=i.getPublicUUID();r(),"on"===t.actionstate?e.sendEvent("favorite","favorite created",a).then(o):"off"===t.actionstate&&e.sendEvent("favorite","favorite removed",a).then(o)}),o.on("hearting.heart",function(t,n,r){n(),e.sendEvent("hearting","hearted",void 0,void 0,void 0,t).then(r)}),o.on("hearting.unheart",function(t,n,r){n(),e.sendEvent("hearting","unhearted",void 0,void 0,void 0,t).then(r)}),o.on("listing.infotab.click",function(t,n,r){var o=t.pagetype;n(),e.sendEvent(o+" page tabs",t.tabname).then(r)}),o.on("listing.booknow.click",function(t,n,r){n(),e.sendEvent("pdp page","booking button click",t.actionlocation,void 0,void 0,t).then(r)}),o.on("listing.phone.reveal",function(t,r,o){var i={},a=new n(t);r(),i[e.metricName(9)]=1,e.sendEvent("show phone","click to reveal",a.getListingIds(),void 0,i).then(o)}),o.on("favoritelist.create.submit",function(t,r,o){var i=new n(t);r(),e.sendEvent("favorite","favorite list created",i.getPublicUUID()).then(o)}),o.on("favoritelist.email.share",function(t,r,o){var i=new n(t);r(),e.sendEvent("favorite","favorite list shared",i.getPublicUUID()).then(o)}),o.on("review.submit",function(n,o,i){o(),r.all([e.sendInteractionPageview(n,t.staticVPVs.reviewsubmit,e.buildInteractionVpvPagetype(n.pagetype)),e.sendEvent("traveler review","traveler submitted")]).then(i)}),o.on("traveler.review.submit",function(t,n,r){n(),e.sendEvent("reviews","review for traveler submitted").then(r)}),o.on("listing.review.submit",function(t,n,r){n(),e.sendEvent("reviews","review for property submitted").then(r)}),o.on("conversation.message.send",function(t,n,r){"travelerdash"===t.pagetype&&(n(),e.sendEvent("traveler activity","inbox message sent").then(r))}),o.on("reservation.cancellation.request.submit",function(t,r,o){var i=new n(t);r(),e.sendEvent("traveler activity","cancellation request sent",i.get("cancellationreason"),void 0,void 0,t).then(o)}),o.on("map.pin.click",function(t,n,r){n(),e.sendEvent("traveler activity","map pin clicked",t.pintype,void 0,void 0,t).then(r)})}return{setupListeners:o}}),r("ua/listeners/traveler-conversion",["ua/ua-wrapper","ua/ecomm","ua/ua-config","doneable","adlhelpers"],function(e,t,n,r,o){"use strict";function i(i){function a(e){return e.reservationid||e.bookingid||e.bookingId}i.on("inquiry.attempt",function(e,t,n){var r={},a=new o(e),s=new o;"inquiry confirmation"===s.get("pagename")&&(t(),a.isSet("eventlistingids")&&(r.eventlistingids=a.get("eventlistingids")),i.trigger("inquiry.success",r).then(n))}),i.on("inquiry.success",function(t,i,a){var s,u={},c=new o(t);i(),s=c.isSet("eventlistingids")?c.get("eventlistingids"):c.getListingIds(),u[e.metricName(2)]=1,r.all([e.sendInteractionPageview(t,n.staticVPVs["inquiry confirmation"],e.buildInteractionVpvPagetype(t.pagetype)),e.sendEvent("property inquiry",s,t.inquiryid,void 0,u,t)]).then(a)}),i.on("reservation.request.submit",function(o,i,s){var u={};i(),u[e.metricName(8)]=1,r.all([e.sendInteractionPageview(o,n.staticVPVs["booking confirmation"],e.buildInteractionVpvPagetype(o.pagetype)),t.trackEcommerce(o),e.sendEvent("booking","confirm",a(o),void 0,u,o)]).then(s)}),i.on("payment.submit",function(n,o,i){o(),r.all([t.trackEcommerce(n),e.sendEvent("traveler payment","confirm",a(n),void 0,void 0,n)]).then(i)}),i.on("vas.submit",function(n,o,i){var a={};o(),a[e.metricName(4)]=1,r.all([t.trackEcommerce(n),e.sendEvent("vas cart","confirm",void 0,void 0,a,n)]).then(i)})}return{setupListeners:i}}),r("ua/listeners/user",["adlhelpers","ua/ua-wrapper"],function(e,t){"use strict";function n(n){n.on("user.sms.entered",function(n){var r=new e(n);t.sendEvent("phone","sms:enrollment",r.get("eventlabel"))})}return{setupListeners:n}}),r("ua/register-ua-listeners",["ua/listeners/cart","ua/listeners/flsp","ua/listeners/identity","ua/listeners/partner-conversion","ua/listeners/ppb","ua/listeners/quote","ua/listeners/rm","ua/listeners/search","ua/listeners/component-interaction","ua/listeners/social","ua/listeners/software","ua/listeners/traveler-activity","ua/listeners/traveler-conversion","ua/listeners/user"],function(){"use strict";function e(e,r){for(t=0;t<n.length;t++)n[t].setupListeners(e,r)}var t,n=arguments;return{setupListeners:e}}),r("ua/edap-ua-integration",["edap","ua/ua-config","ua/ua-wrapper","ua/register-ua-listeners"],function(e,t,n,r){"use strict";function o(){var t;return n.checkIfNewUser(),t=n.init(),t&&r.setupListeners(a),e}var i=t.edapScopeName,a=new e.Scope(i);return{init:o}}),r("hadoop/hadoop-wrapper",["edap","domhelpers","doneable"],function(e,t,n){"use strict";function r(){function r(t,n,r,o){return"string"!=typeof t?(e.error('hadoop.buildUrl requires that "eventName" be a string: '+t),!1):"string"!=typeof n?(e.error('hadoop.buildUrl requires that "sessionId" be a string: '+n),!1):"string"!=typeof r?(e.error('hadoop.buildUrl requires that "visitorId" be a string: '+r),!1):o&&"object"!=typeof o?(e.error('hadoop.buildUrl requires that "payload" be an object, if set: '+n),!1):!0}this.missingDefaultValue="NA",this.urls={beacon:"/edap/elo/v1/event/beacon",img:"/edap/elo/v1/event/img"},this.shouldFetchWithKeepalive=!1,this.getHasId=function(){var e=this,n=t.getCookie("has");return null===n&&(n=e.missingDefaultValue),n},this.getHavId=function(){var e=this,n=t.getCookie("hav");return null===n&&(n=e.missingDefaultValue),n},this.createDataObject=function(e,t,n,o){var i={type:"edap:"+e,sessionId:t,visitorId:n,site:this.missingDefaultValue,payload:o},a=null;return r(e,t,n,o)?(o&&o.hasOwnProperty("monikerbrand")&&(i.site=o.monikerbrand),i):a},this.buildBeaconBlob=function(e,t,n,r,o){var i=this.createDataObject(e,t,n,r,o);return null===i?i:new Blob([JSON.stringify(i)])},this.buildUrl=function(n,r,o,i,a){var s,u,c=this.createDataObject(n,r,o,i,a),l=t.getWindow(),p=[],d=this.urls.img;if(null===c)return c;for(u in c)c.hasOwnProperty(u)&&"payload"!==u&&p.push(u+"="+l.encodeURIComponent(c[u]));if(c.payload&&l.JSON&&"function"==typeof l.JSON.stringify){try{s=l.encodeURIComponent(l.JSON.stringify(c.payload))}catch(g){e.error(g),s=l.encodeURIComponent('{"error":"Could not JSON.stringify payload"}')}p.push("payload="+s)}return p.push("_restfully=true"),d=d+"?"+p.join("&")},this.sendEventWithFetch=function(n,r,o,i){var a=this,s=this.urls.beacon;t.getWindow().fetch(s,{method:"POST",headers:{"Content-Type":"text/plain","x-homeaway-site":r},referrerPolicy:"origin-when-cross-origin",mode:"same-origin",credentials:"same-origin",cache:"no-cache",redirect:"follow",keepalive:a.shouldFetchWithKeepalive,body:n}).then(function(t){t.text().then(function(){try{if("function"==typeof o&&o(s),!t.ok)throw new Error("non-2XX response received from collector: "+t.status+" "+t.statusText)}catch(n){e.error(n,{},{logErrorOnly:!0})}})})["catch"](function(){i()})},this.send=function(r,o,i,a){var s=this,u=["emailaddress","firstname","lastname"],c=["gaevents","thirdparty","criteoevents"];return new n(function(e){var n,l,p,d,g,f;if(i||(i=s.getHasId()),a||(a=s.getHavId()),o){for(p=0,d=u.length;d>p;p++)l=u[p],o.hasOwnProperty(l)&&delete o[l];for(p=0,d=c.length;d>p;p++)l=c[p],o.hasOwnProperty(l)&&delete o[l]}"function"==typeof t.getWindow().fetch?(g=s.buildBeaconBlob(r,i,a,o),f=o?o.monikerbrand:"",s.sendEventWithFetch(g,f,e,function(){n=s.buildUrl(r,i,a,o),t.getImage(n,e)})):(n=s.buildUrl(r,i,a,o),t.getImage(n,e))},{error:function(t){e.error(t)}})}}var o;return o=new r,document.addEventListener("mousedown",function(){o.shouldFetchWithKeepalive=!0},{once:!0}),o}),r("hadoop/listeners/test-exposure-handlers",["adlhelpers","domhelpers","edaphelpers","doneable"],function(e,t,n,r){"use strict";function o(t,o,p,d,g){if(!o||"function"!=typeof o.trigger)throw new TypeError("processTestExposure(): must pass in an EDAP instance");return new r(function(f){if(!t)throw new TypeError("processTestExposure(): hadoop must be set");if(!(p instanceof e))throw new TypeError("processTestExposure(): adl must be an ADLHelpers instance");if(g)return void(Object.keys(a).length?(n.forOwn(a,function(e,t){e[u].length&&e[c].length&&s.push(o.trigger("test.exposure",{testname:e[u].join(","),variant:e[c].join(","),entityid:t}))}),r.all(s).then(function(){a={},s=[],f()})):f());if("string"!=typeof p.get(c)||!p.get(u)||!p.get(c))throw new ReferenceError("processTestExposure(): event data must contain testname and variant in string format");return p.isSet(l)?a.hasOwnProperty(p.get(l))?(a[p.get(l)][u].push(p.get(u)),a[p.get(l)][c].push(p.get(c))):(a[p.get(l)]={},a[p.get(l)][u]=[p.get(u)],a[p.get(l)][c]=[p.get(c)]):a.hasOwnProperty(i)?(a[i][u].push(p.get(u)),a[i][c].push(p.get(c))):(a[i]={},a[i][u]=[p.get(u)],a[i][c]=[p.get(c)]),d===!0?void t.send("test.exposure",p.get(),p.isSetGet("sessionid"),p.isSetGet("visitorid")).then(function(){a={},f()}):void f()},{error:o.error})}var i="-1",a={},s=[],u="testname",c="variant",l="entityid";return{processTestExposure:o}}),r("hadoop/listeners/featureflagged",["hadoop/hadoop-wrapper","hadoop/listeners/test-exposure-handlers","adlhelpers","domhelpers","doneable"],function(e,t,n,r,o){"use strict";function i(e,t){var n,o=r.getCookie(e);return null===o?t:(o===O?n=!1:(r.removeCookie(e),n=t),n)}function a(e){var t;v=e,t=v.indexOf("edap.error"),t>-1&&v.splice(t,1)}function s(e){return v.indexOf(e)>-1}function u(e,t){var n=1===e,o=r.getCookie(t);return n&&o?r.removeCookie(t):0===e&&r.setCookie(t,O,r.getHostname(),x),n}function c(e){y=u(e.getFeatureProperty("edapFeatureHadoopPageviewLogging",P),k),w=u(e.getFeatureProperty("edapFeatureHadoopGenericLogging",P),S),b=u(e.getFeatureProperty("edapFeatureHadoopNamedLogging",P),U),E=1===e.getFeatureProperty("edapFeatureHadoopLoadedLogging",P)}function l(e){var t=C.test(e),n=D.test(e),r="pageview"===e;return r&&y||t&&w||n&&E||!r&&!t&&!n&&b?!0:!1}function p(e,t){return new o(function(o){var i,a=r.getDocumentReferrer(),s=new n({}),u="page.referrer",c=new n(t.get()),l=["visitorid","sessionid","pagehref","edapintegrationsversion","clienttimestamp","edapeventid","currentpageviewid","parentpageviewid","inauthid","clienttype","appenvironment","appname","appversion","monikerbrand","mpaasregion","pageflow","pagename","pagetype","publicuuid","sensitive","visitortype","analyticsbrand","exposedtests","fssessionurl","gbsessionurl","item5","pageurl","proctor","proctorpayload","requestmarker","testing","displaycurrency","displaylocale","preferredlanguage"];if(A)return void o();if(r.isCrossDomainReferral()){for(A=!0,c=new n(e.internal.buildTriggerData(u,t.get())),s.setIfNotSet("referrer",a),i=0;i<l.length;i++)s.setIfNotSet(l[i],c.isSetGet(l[i]));s.setIfNotSet("edapeventname",u),e.trigger(u,s.get(),{forceData:!0}).then(o)}},{error:e.error})}function d(t,n,r){t.push(e.send(n,r.get(),r.isSetGet("sessionid"),r.isSetGet("visitorid")))}function g(r,i,a,u){var c=new n(i),g=c.get("edapeventname"),f=[],h={error:r.error};if(a(),s(g))return void u();if(l(g)){switch(g){case"test.exposure":f.push(t.processTestExposure(e,r,c,I));break;case"page.unload":I=!1,d(f,g,c);break;case"pageview":I||(I=!0,f.push(t.processTestExposure(e,r,c,I,!0))),f.push(p(r,c));default:d(f,g,c)}o.all(f,h).then(u)}else u()}function f(e){E&&e.on("*",function(t,r,o){var i=new n(t),a=i.get("edapeventname");D.test(a)&&g(e,t,r,o)})}function h(e){L||(a(e["public"].coreSupportedEvents),(y||w||b)&&(e.on("*",function(t,r,o){var i=new n(t),a=i.get("edapeventname");D.test(a)||g(e,t,r,o)}),L=!0))}function m(e){L=!1,y=i(k,!0),w=i(S,!0),b=i(U,!0),E=!1,e["public"].features.onLoad(function(){c(e["public"].features),h(e),f(e)}),h(e)}var v,y,w,b,E,k="edap-d-l-pageview",S="edap-d-l-generic",U="edap-d-l-named",D=/^[a-z]+[.](load|did[.]load)$/,C=/^generic[.].[a-z.]+/,A=!1,x=30,O="1",L=!1,P="value",I=!1;return{setupListeners:m}}),r("hadoop/register-hadoop-listeners",["hadoop/listeners/featureflagged"],function(){"use strict";function e(e){for(t=0;t<n.length;t++)n[t].setupListeners(e)}var t,n=arguments;return{setupListeners:e}}),r("hadoop/edap-hadoop-integration",["edap","hadoop/register-hadoop-listeners"],function(e,t){"use strict";function n(){return t.setupListeners(o),e}var r="hadoop",o=new e.Scope(r);return{init:n}}),r("tagmanager/tmshelpers",["domhelpers"],function(e){"use strict";var t,n="edapFeatureLoadEnsighten",r="{SPACE}",o="//nexus.ensighten.com/away/"+r+"/Bootstrap.js",i={bnb:{unit:"bnb-test",dev:"bnb-test",test:"bnb-test",stage:"bnb-stage",production:"bnb-production"},toprural:{unit:"toprural-test",dev:"toprural-test",test:"toprural-test",stage:"toprural-stage",production:"toprural-production"},"default":{unit:"test",dev:"test",test:"test",stage:"stage",production:"production"}},a={bnb:"bnb",toprural:"toprural","default":"default"};return{getEdapScope:function(){return t},setEdapScope:function(e){t=e},init:function(e){var t=this;t.setEdapScope(e),t.initEnsighten()},initEnsighten:function(){var e=this;t.once("tagmanager.load",function(r){t["public"].features.onLoad(function(){var o=1===t["public"].features.getFeatureProperty(n,"value");o&&e.loadEnsighten(r.monikerbrand,r.appenvironment)})})},loadEnsighten:function(n,r){var o=this,i=o.getBootstrapperUrl(n,r),a=e.getMsFromEpoch();e.loadScript(i),t.getData().loadtimestamp=a},getBootstrapperUrl:function(e,t){var n,s="default";return e&&0===e.indexOf("bnb")?s="bnb":a.hasOwnProperty(e)&&(s=e),n=i[a[s]][t],void 0===n&&(n=i[a[s]].production),o.replace(r,n)}}}),r("tagmanager/edap-tagmanager-integration",["edap","tagmanager/tmshelpers"],function(e,t){"use strict";function n(){return t.init(o),e}var r="tagmanager",o=new e.Scope(r);return{init:n}}),r("demo/edap-demo-integration",["edap"],function(e){"use strict";function t(){return r.on("whos.there",function(){console.log(n+" is ready and listening")}),e}var n="demo",r=new e.Scope(n);return{init:t}}),r("xhrhelpers",["domhelpers","edap"],function(e,t){"use strict";function n(){return new XMLHttpRequest}function r(){return this.get=function(e){return"undefined"==typeof e?this.xhr:this.xhr[e]},this.set=function(e,n){return"string"!=typeof e?(t.error("Attempting to set xhr key with non-strings:"+e),!1):(this.xhr[e]=n,!0)},this.setRequestHeader=function(e,n){return"string"!=typeof e||"string"!=typeof n?(t.error("Attempting to set the header with non strings"),!1):(this.xhr.setRequestHeader(e,n),!0)},this.isSet=function(e){return void 0!==this.xhr[e]&&null!==this.xhr[e]},this.open=function(e,n){return"string"!=typeof e||"string"!=typeof n?(t.error("Attempting to open the request with non strings"),!1):(this.xhr.open(e,n,!0),!0)},this.send=function(){this.xhr.send()},this.createXHR=function(e,n,r,o,i){function a(e){try{e(s)}catch(n){t.error(n)}}var s=this;return this.xhr?(this.open(e,n),this.set("onload",function(){a(r)}),this.set("onerror",function(){a(o)}),this.set("ontimeout",function(){a(i)}),!0):(t.error("createXHR(): browser does not support XHRequest"),!1)},this.xhr=n(),this}return r}),r("feature-flag/feature-flags",["domhelpers","doneable","edaphelpers","xhrhelpers"],function(e,t,n,r){"use strict";function o(e,i){var a,s=this;if(!e||!e.hasOwnProperty("edapVersion"))throw new TypeError("Features: must pass in EDAP when creating a new instance");if(!(s instanceof o))throw a=new TypeError('Features must be called with the "new" keyword'),e.error(a),a;return i=i||{},s.config=n.defaults({},[i,{endpointOrigin:"",endpointPath:"/edap/service/v1/getInitData",ajaxTimeout:3e3}]),s.state=o.state,s.data={featureFlagList:[],status:o.state.INIT},s.getResponseJSON=function(t){try{return JSON.parse(t)}catch(n){e.error("getResponseJSON(): Could not parse JSON responseText: "+t)}return{}},s.parsePayload=function(e){var t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(n){t=e}return t},s.getFeatureFlagList=function(t){var r,o=[];return"object"!=typeof t.features?o:(n.forOwn(t.features,function(t,n){try{r=new e["public"].FeatureFlag(e,{name:n,value:t.bucketValue,payload:s.parsePayload(t.payload)}),o.push(r)}catch(i){e.error("getFeatureFlagList(): Could not parse entry "+n+": "+JSON.stringify(t))}}),o)},s.loadFeaturesData=function(){return new t(function(t){function n(n){var r,i=n.get("status");200===i?(r=s.getResponseJSON(n.get("responseText")),s.data.featureFlagList=s.getFeatureFlagList(r),s.data.status=o.state.LOADED):(l=new Error([p+"():","got status",i,"on requesting",u].join(" ")),e.error(l),s.data.status=o.state.BADRESPONSE),t()}function i(){l=new Error([p+"():","network error attempting to reach",u].join(" ")),e.error(l),s.data.status=o.state.ERROR,t()}function a(){l=new Error([p+"():","network request timed out attempting to reach",u].join(" ")),e.error(l),s.data.status=o.state.TIMEOUT,t()}var u,c,l,p="loadFeaturesData";u=encodeURI([s.config.endpointOrigin,s.config.endpointPath].join("")),c=new r,c.createXHR("GET",u,n,i,a),c.set("timeout",s.ajaxTimeout),s.data.featureFlagList=[],s.data.status=o.state.PENDING,c.send()},{error:e.error})},s}return o.state={INIT:"init",PENDING:"pending",LOADED:"loaded",BADRESPONSE:"bad response",ERROR:"error",TIMEOUT:"timeout"},o}),r("feature-flag/edap-feature-flag-integration",["domhelpers","edap","feature-flag/feature-flags"],function(e,t,n){"use strict";function r(){return i.once("features.load",function(t,r,o){function a(){g||i["public"].features.load([]),i.trigger("features.did.load",{loadtime:""+(s-p),replaytime:""+d,loadstatus:c.data.status}).then(o)}var s,u,c=i.getData().features,l=i.globalOptions,p=e.getMsFromEpoch(),d=null,g=!1;r(),c instanceof n||(c=new n(i,{endpointOrigin:l.endpointOrigin}),i.getData().features=c),c.loadFeaturesData().then(function(){var t=c.data.featureFlagList.length>0;s=e.getMsFromEpoch(),c.data.status===c.state.LOADED&&t?(i["public"].features.load(c.data.featureFlagList),
g=!0,u=e.getMsFromEpoch(),i["public"].playback.replay().then(function(){d=e.getMsFromEpoch()-u,a()})):a()})}),t}var o="features",i=new t.Scope(o);return{init:r}}),r("init",["edap"],function(e){"use strict";function t(){return e.integrationsVersion="11.54.0",n.skipFlush!==!0&&e.trigger("edap.flush"),r!==!0&&e.trigger("pageview"),n.skipTagManager!==!0&&(r===!0?e.once("pageview",function(){e.trigger("tagmanager.load")}):e.trigger("tagmanager.load")),n.skipFeatureFlags===!0?e["public"].features.load([]):e.trigger("features.load"),e}var n=e.globalOptions,r=n.skipPageview;return{init:t}}),r("loader",["edap","debughelpers","data-enrichment/edap-data-enrichment-integration","ua/edap-ua-integration","hadoop/edap-hadoop-integration","tagmanager/edap-tagmanager-integration","demo/edap-demo-integration","feature-flag/edap-feature-flag-integration","init"],function(e,t,n,r,o,i,a,s,u){"use strict";var c,l="logloadevents",p=["ua.load","ua.did.load","tagmanager.load","tagmanager.did.load","features.load","features.did.load"];if(!t.isInDebugMode(l))for(c=0;c<p.length;c++)e["public"].addIgnoredConsoleEvent(p[c]);return n.init(),e.globalOptions.skipGA||r.init(),o.init(),i.init(),a.init(),s.init(),u.init(),e}),n("loader")});
//# sourceMappingURL=edap-integrations.min.js.map